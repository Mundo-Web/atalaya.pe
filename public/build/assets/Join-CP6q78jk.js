import{j as e}from"./Accordion-B0xeqd_u.js";import{r as x}from"./index-B80Lgev0.js";import{c as R}from"./ReactAppend-Da6mr3zD.js";import{G as D,C as z}from"./CreateReactScript-wxngZ06p.js";import{P as V,B as L,U as O,S as J,I as U,D as W,C as G,M as H,a as K}from"./statuses-image-DRZxZZRY.js";import{m as q}from"./main-DtAlmsP1.js";import{r as _}from"./server.browser-bIzDeQez.js";import{A as P}from"./AuthRest-CzS3X5Ou.js";import{i as T}from"./tippy-react.esm-PO7soYrD.js";import"./TippyButton-DN-nzi_f.js";import{S as C}from"./SurveyStep-C1GxQ1hd.js";import{J as Q}from"./JSEncrypt-D3I3x59l.js";import{T as Y,t as X}from"./LoginStep-DIoBarna.js";import{S as Z}from"./ServicesModal-NsFMdPvs.js";import"./index-STwnHZb6.js";import"./index.esm-X2U-7gJn.js";import"./___vite-browser-external_commonjs-proxy-C9-083JZ.js";const ee=({value:s,className:n})=>e.jsx("div",{className:`h-2 bg-[#BEC5FF] w-full rounded-full ${n}`,children:e.jsx("div",{className:"bg-[#4621E1] h-full rounded-full transition-all",style:{width:`${s}%`}})}),B=[{key:"account",color:"#4621E1",image:V},{key:"business",color:"#FF6C37",image:L},{key:"usage",color:"#50C4FF",image:O,showProgressBar:!0},{key:"survey",color:"#5633FE",image:J,showProgressBar:!0},{key:"invite-team",color:"#FF6C37",image:U,showProgressBar:!0},{key:"dashboard",color:"#4621E1",image:W,showProgressBar:!0},{key:"columns",color:"#50C4FF",image:G,showProgressBar:!0},{key:"manage",color:"#5633FE",image:H,showProgressBar:!0},{key:"statuses",color:"#FF6C37",image:K,showProgressBar:!0}],$=B.map(s=>s.key),se=({children:s,step:n,setStep:u})=>{const{color:c,image:t,showProgressBar:a}=B.find(m=>m.key===n)||{},i=$.indexOf(n),d=()=>{let m=i-1;if(m<0)return location.replace("/");u($[m])},r=B.filter(({showProgressBar:m})=>m),o=(r.findIndex(({key:m})=>m==n)+1)/(r.length+1)*100;return e.jsxs("main",{className:"text-[#000938] bg-no-repeat bg-cover bg-fixed bg-center",style:{},children:[e.jsx("header",{className:"bg-white shadow-lg",children:e.jsxs("div",{className:"max-w-7xl w-full mx-auto relative flex items-center justify-center py-4 px-4 sm:px-6 lg:px-8",children:[n!="thanks"&&n!="login"&&e.jsxs("button",{className:"absolute left-4 sm:left-6 lg:left-8 px-2 flex items-center hover:bg-gray-100 rounded-full",onClick:d,children:[e.jsx("i",{className:"mdi mdi-chevron-left mdi-24px"}),e.jsx("span",{className:"hidden md:block mx-2",children:i==0?"Volver a inicio":"Volver"}),i==0&&e.jsx("span",{className:"block md:hidden mx-2",children:"Inicio"})]}),e.jsx("a",{href:"/",className:"transition-transform hover:scale-105",children:e.jsx("img",{src:"/assets/img/logo-dark.svg",alt:"",style:{height:"32px"}})})]})}),e.jsxs("section",{className:"relative bg-[#f8f8f8]",children:[e.jsx("img",{className:"absolute top-0 left-0 w-full h-full z-0",src:"/assets/img/background-auth.png"}),e.jsxs("div",{className:` max-w-7xl mx-auto flex flex-col md:flex-row z-10 ${n=="thanks"||n=="login"?"items-center justify-center":"items-start"}`,children:[e.jsxs("div",{className:`relative h-[calc(100vh-144px)] md:h-[calc(100vh-116px)] overflow-y-auto w-full p-6 md:p-12 z-10  ${n=="thanks"||n=="login"?"justify-center items-center":"md:w-1/2  justify-start"}`,children:[a&&e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"mb-8",value:o}),e.jsx("img",{src:"//crm.atalaya.localhost/assets/img/logo-dark.svg",alt:"Atalaya CRM",className:"h-8 w-max mb-8",onError:m=>m.target.src="/assets/img/logo-dark.svg"})]}),s]}),n!="thanks"&&n!="login"&&e.jsx("div",{className:"hidden md:absolute left-1/2 right-0 bottom-0 top-0 p-10 md:flex items-center justify-center transition-colors",style:{backgroundColor:c},children:e.jsx("img",{src:t,alt:"Atalaya Join image",className:"max-w-[420px] w-full h-full max-h-[360px] object-contain transition-all animate-bounce animate-duration-[10s]"})})]})]}),e.jsx("footer",{className:"bg-white shadow-lg",children:e.jsxs("div",{className:"max-w-7xl w-full mx-auto relative flex flex-col md:flex-row gap-2 items-center justify-between py-4 px-4 sm:px-6 lg:px-8 text-sm",children:[e.jsxs("span",{children:[new Date().getFullYear()," ¬© Atalaya | Propiedad de ",e.jsx("a",{href:"//mundoweb.pe",target:"_blank",className:"text-[#fe4611]",children:"MundoWeb"})]}),e.jsx("span",{children:"Powered By MundoWeb"})]})})]})},j=({label:s,children:n,className:u,required:c,icon:t,type:a="text",placeholder:i,value:d,onChange:r,onKeyDown:p,invalid:o,invalidText:m,disabled:h})=>{const[g,v]=x.useState(!1),N=()=>{v(!g)};let b=a;return a=="password"&&(b=g?"text":"password"),e.jsx("div",{className:"group relative flex-1",children:e.jsxs("label",{className:`flex gap-2 border-2 px-3 py-2 border-[#BEC5FF] rounded-lg bg-white ${o?"border-[#FE4611]":"focus-within:border-[#4621E1]"} focus-within:cursor-text ${h?"cursor-not-allowed":"cursor-pointer"} transition-colors ${u}`,children:[t&&e.jsx("i",{className:t}),e.jsxs("div",{className:`${t?"flex-1":"w-full"} transition-all`,children:[e.jsxs("span",{className:"block text-xs font-semibold mb-1 select-none",children:[s,c&&e.jsx("span",{className:"text-[#FE4611] ms-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:b,className:"border-0 outline-none bg-transparent w-full cursor-pointer focus:cursor-text disabled:cursor-not-allowed",placeholder:i,value:d,onChange:r,onKeyDown:p,required:c,disabled:h}),a=="password"&&e.jsx("button",{type:"button",className:"absolute right-0",onClick:N,children:g?e.jsx("i",{className:"mdi mdi-eye"}):e.jsx("i",{className:"mdi mdi-eye-off"})})]}),o&&e.jsx("span",{className:"text-[#FE4611] block text-xs mt-1",children:m})]}),n]})})},A=({label:s,required:n,icon:u,value:c,values:t=[],onChange:a,searchable:i=!1,disabled:d})=>{const r=x.useRef(),p=x.useRef(),o=x.useRef(),[m,h]=x.useState(""),[g,v]=x.useState(!1);x.useEffect(()=>{g&&i&&setTimeout(()=>{o.current.focus()},0);const l=f=>{var y,w;g&&!((y=p.current)!=null&&y.contains(f.target))&&!((w=r.current)!=null&&w.contains(f.target))&&(v(!1),h(""))};return document.addEventListener("click",l),()=>{document.removeEventListener("click",l)}},[g]);const N=t.find(l=>typeof l=="object"?l.value==c:l==c),b=t.filter(l=>{const f=document.createElement("div");f.innerHTML=_(typeof l=="object"?l.label:l);const w=f.textContent.toString().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),E=m.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return w.includes(E)});return x.useEffect(()=>{d&&v(!1)},[d]),e.jsx("div",{className:"group relative w-full",children:e.jsxs("div",{className:"relative",children:[e.jsxs("label",{ref:r,className:`flex gap-2 border-2 px-3 py-2 ${g?"border-[#4621E1]":"border-[#BEC5FF]"} rounded-lg bg-white cursor-pointer ${d&&"cursor-not-allowed"} transition-colors`,onClick:()=>{d||v(!g)},children:[u&&e.jsx("i",{className:u}),e.jsxs("div",{className:`relative w-[calc(100%-24px)] ${u&&"flex-1"}`,children:[e.jsxs("span",{className:"block text-xs font-semibold mb-1 select-none",children:[s,n&&e.jsx("span",{className:"text-[#FE4611] ms-1",children:"*"})]}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{className:"text-gray-700 truncate",children:(N==null?void 0:N.label)??c}),e.jsx("i",{className:`absolute mdi mdi-chevron-down transition-transform ${g?"rotate-180":""} right-0 bottom-0`})]})]})]}),g&&e.jsxs("div",{ref:p,className:"absolute z-10 w-full mt-1 bg-white rounded-lg shadow-lg",children:[i&&e.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 rounded-t-lg",children:e.jsx("input",{ref:o,type:"text",className:"w-full px-3 py-2 border-0 text-sm border-gray-200 rounded-md focus:outline-none focus:border-[#4621E1]",placeholder:"Buscar...",value:m,onChange:l=>h(l.target.value),onClick:l=>l.stopPropagation()})}),e.jsxs("div",{className:`max-h-[240px] overflow-auto rounded-b-lg ${!i&&"rounded-t-lg"}`,children:[b.map((l,f)=>{let y=l,w=l;return typeof l=="object"&&(y=l.value,w=l.label),e.jsx("div",{className:"px-3 py-2 hover:bg-gray-100 cursor-pointer text-sm truncate w-full",onClick:()=>{a({target:{value:y,textContent:w}}),v(!1),h("")},children:w},f)}),b.length==0&&e.jsx("div",{className:"px-3 py-2 text-sm w-full text-center text-gray-600",children:"No hay resultados"})]})]})]})})},F=new P,M=({data:s,setData:n,setStep:u,setService:c,jsEncrypt:t})=>{const[a,i]=x.useState(!1),[d,r]=x.useState(!1),[p,o]=x.useState(null),[m,h]=x.useState(""),[g,v]=x.useState(s.email),N=async l=>{if(l.preventDefault(),!g){C.fire({title:"Verificaci√≥n requerida",text:"Primero debes verificar tu correo electr√≥nico",icon:"warning",showCancelButton:!0,confirmButtonText:"Verificar ahora",cancelButtonText:"Cancelar",customClass:{confirmButton:"bg-[#4621E1] text-white",cancelButton:"bg-[#FE4611] text-white"}}).then(E=>{E.isConfirmed&&b()});return}i(!0),o(null);const{status:f,message:y,type:w}=await F.userExists({email:s.email,password:t.encrypt(s.password),passwordConfirm:t.encrypt(s.passwordConfirm)});if(i(!1),!f){o(w),h(y);return}u("business")},b=async()=>{o(null),r(!0);const{status:l,message:f,summary:y}=await F.sendCode({email:s.preEmail});if(r(!1),!l){o(y.type),h(f);return}const{value:w}=await C.fire({title:"Verificaci√≥n de Correo",html:`
                <p class="text-base text-[#000938] leading-tight">Por favor, ingresa el c√≥digo enviado a <b>${s.preEmail}</b> para verificar tu identidad y continuar con el registro</p>
            `,input:"text",inputPlaceholder:"Ingresa el c√≥digo",inputAttributes:{maxlength:6},showCancelButton:!0,confirmButtonText:"Verificar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0,preConfirm:async E=>{if(!E)return C.showValidationMessage("El c√≥digo es requerido");if(E.length<6)return C.showValidationMessage("El c√≥digo debe tener 6 caracteres");const{status:S,message:k}=await F.verifyEmail({email:s.preEmail,code:E});return S||C.showValidationMessage(k),v(!0),s.preEmail},customClass:{popup:"verification-modal",title:"text-3xl font-bold text-[#000938]",input:"text-base px-3 py-2 text-[#000938] uppercase text-center",confirmButton:"bg-[#4621E1] text-white",cancelButton:"bg-[#FE4611] text-white",loader:"mdi mdi-loading mdi-spin"},didOpen:()=>{const E=document.querySelector(".swal2-input");E.addEventListener("paste",S=>{S.preventDefault();const k=S.clipboardData.getData("text").replace(/\s/g,"");E.value=k})}});n(E=>({...E,email:w}))};return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-4xl font-bold mb-2",children:"Crea tu cuenta"}),e.jsx("p",{className:"text text-gray-600 mb-8",children:"Necesitamos algunos datos para personalizar tu experiencia"}),e.jsxs("form",{className:"space-y-4 mb-2",onSubmit:N,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(A,{label:"Tipo de doc.",icon:"mdi mdi-badge-account-horizontal-outline",value:s.documentType,values:["DNI","CE"],onChange:l=>n({...s,documentType:l.target.value}),required:!0,disabled:a}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(j,{label:"N√∫mero de documento",placeholder:"00000000",value:s.documentNumber,onChange:l=>n({...s,documentNumber:l.target.value}),required:!0,disabled:a})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(j,{label:"Nombres",placeholder:"Nombre",value:s.name,onChange:l=>n({...s,name:l.target.value}),required:!0,disabled:a}),e.jsx(j,{label:"Apellidos",placeholder:"Apellido",value:s.lastname,onChange:l=>n({...s,lastname:l.target.value}),required:!0,disabled:a})]}),e.jsx("div",{className:"relative",children:e.jsx(j,{className:"items-end",label:"E-mail",placeholder:"correo@ejemplo.com",value:s.preEmail,onChange:l=>n({...s,preEmail:l.target.value}),invalid:p=="email",invalidText:m,required:!0,disabled:a||d||g,onKeyDown:l=>{l.key==="Enter"&&(l.preventDefault(),b())},children:g?e.jsx("i",{className:"mdi mdi-check text-[#4621E1] font-bold"}):e.jsx(T,{content:"Verificar email",children:e.jsx("button",{type:"button",className:"text-sm text-nowrap font-semibold underline text-[#4621E1] outline-none disabled:opacity-90 disabled:cursor-not-allowed",onClick:b,disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"mdi mdi-spin mdi-loading"}),"Enviando c√≥digo"]}):"Verificar"})})})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(j,{label:"Contrase√±a",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",type:"password",value:s.password,onChange:l=>n({...s,password:l.target.value}),invalid:p=="password",invalidText:m,required:!0,disabled:a}),e.jsx(j,{label:"Confirmar",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",type:"password",value:s.passwordConfirm,onChange:l=>n({...s,passwordConfirm:l.target.value}),invalid:p=="password",invalidText:m,required:!0,disabled:a})]}),e.jsx("button",{type:"submit",className:"w-full !mt-6 bg-[#4621E1] hover:bg-opacity-90 transition-colors text-white rounded-xl py-3 disabled:cursor-not-allowed",disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"mdi mdi-loading mdi-spin"})," Verificando"]}):"Continuar"})]}),e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("p",{className:"text-sm",children:["Al continuar, aceptas nuestros ",e.jsx("a",{href:"#",className:"text-[#fe4611] underline",children:"T√©rminos de servicio"})," y ",e.jsx("a",{href:"#",className:"text-[#fe4611] underline",children:"Pol√≠ticas de Privacidad"})]}),e.jsx(T,{content:"Ya tiene una cuenta?",children:e.jsx("button",{type:"button",onClick:()=>c(null),className:"text-sm text-nowrap text-[#4621E1] hover:underline",children:"Inicia sesi√≥n"})})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("b",{className:"block",children:"¬øNecesitas ayuda para elegir?"}),e.jsx("span",{className:"text-gray-600",children:"Nuestro equipo est√° aqu√≠ para ayudarte."})]}),e.jsx("a",{href:"#",className:"text-[#4621E1] underline",children:"Hablar con Ventas"})]})},te=new P,ae=({data:s,setData:n,setStep:u,prefixes:c=[],jsEncrypt:t})=>{const[a,i]=x.useState(!1),d=async r=>{r.preventDefault(),i(!0),await te.register({...s,password:t.encrypt(s.password),passwordConfirm:t.encrypt(s.passwordConfirm)}),i(!1),location.href="//crm.atalaya.pe/join",u("usage")};return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-4xl font-bold mb-2",children:"Informaci√≥n de tu empresa"}),e.jsx("p",{className:"text text-gray-600 mb-8",children:"Completa los datos de tu empresa para personalizar tu experiencia"}),e.jsxs("form",{className:"space-y-4 mb-6",onSubmit:d,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(j,{label:"RUC",placeholder:"00000000000",value:s.ruc,onChange:r=>n({...s,ruc:r.target.value}),required:!0}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(j,{label:"Nombre Comercial",placeholder:"Mi Empresa",value:s.commercialName,onChange:r=>n({...s,commercialName:r.target.value}),required:!0})})]}),e.jsx(j,{label:"Raz√≥n Social",placeholder:"Mi Empresa S.A.C.",value:s.businessName,onChange:r=>n({...s,businessName:r.target.value}),required:!0}),e.jsx(j,{icon:"mdi mdi-map-marker",label:"Direcci√≥n",placeholder:"Av. Empresarial 456, San Isidro",value:s.address,onChange:r=>n({...s,address:r.target.value}),required:!0}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(A,{label:"Prefijo",icon:"mdi mdi-flag",value:s.phonePrefix,values:c.map(r=>({value:r.realCode,label:e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-emoji w-6 inline-block",children:r.flag}),e.jsx("span",{className:"font-semibold",children:r.country}),e.jsx("span",{className:"text-gray-600 text-xs ms-1",children:r.beautyCode})]})})),onChange:r=>n({...s,phonePrefix:r.target.value}),searchable:!0}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(j,{icon:"mdi mdi-phone",label:"Tel√©fono",placeholder:"000000000",type:"tel",value:s.phone,onChange:r=>n({...s,phone:r.target.value}),required:!0})})]}),e.jsx("button",{type:"submit",className:"w-full !mt-6 bg-[#4621E1] hover:bg-opacity-90 transition-colors text-white rounded-xl py-3",children:"Continuar"})]}),e.jsxs("blockquote",{className:"bg-[#EBEFFF] p-4 rounded-lg mb-6",children:[e.jsxs("div",{className:"font-bold mb-2",children:[e.jsx("i",{className:"mdi mdi-lightbulb me-2"}),"Tip"]}),e.jsx("p",{className:"text-sm leading-tight",children:"Esta informaci√≥n nos ayudar√° a configurar tu CRM con las mejores pr√°cticas para tu industria."})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("b",{className:"block",children:"¬øNecesitas ayuda para elegir?"}),e.jsx("span",{className:"text-gray-600",children:"Nuestro equipo est√° aqu√≠ para ayudarte."})]}),e.jsx("a",{href:"#",className:"text-[#4621E1] underline",children:"Hablar con Ventas"})]})},re=[{key:"personal",icon:"mdi mdi-account-outline",name:"Personal",description:"Para uso individual y freelancers"},{key:"startup",icon:"mdi mdi-flash-outline",name:"Emprendimiento",description:"Para startups y proyectos emergentes"},{key:"business",icon:"mdi mdi-account-group-outline",name:"Negocio",description:"Para empresas y equipos comerciales"}],ne=({data:s,setData:n,setStep:u})=>{const c=t=>{if(t.preventDefault(),!s.accountType){C.fire({icon:"warning",title:"Atenci√≥n",text:"Por favor selecciona una opci√≥n antes de continuar"});return}u("survey")};return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-4xl font-bold mb-2",children:"Hola, ¬øc√≥mo planeas usar Atalaya CRM?"}),e.jsx("p",{className:"text text-gray-600 mb-8",children:"Esto nos ayudar√° a personalizar tu experiencia"}),e.jsxs("form",{className:"space-y-4 mb-2",onSubmit:c,children:[re.map(t=>e.jsxs("div",{className:"select-none",children:[e.jsx("input",{type:"radio",name:"accountType",id:`type-${t.key}`,value:t.key,checked:t.key==s.accountType,className:"hidden peer",onChange:a=>n({...s,accountType:a.target.value}),required:!0}),e.jsxs("label",{htmlFor:`type-${t.key}`,className:"p-4 group flex items-center gap-2 border-2 border-[#BEC5FF] rounded-xl bg-white cursor-pointer transition-colors peer-checked:border-[#4621E1]",children:[e.jsx("i",{className:`${t.icon} text-2xl w-10 h-10 rounded-lg flex items-center justify-center ${t.key==s.accountType?"bg-[#4621E1] text-white":"bg-[#DBE0FF] text-[#4621E1]"} transition-colors`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("b",{className:"block",children:t.name}),e.jsx("small",{className:"block",children:t.description})]})]})]},t.key)),e.jsx("div",{className:"flex w-full justify-end !mt-6",children:e.jsx("button",{type:"submit",className:"bg-[#4621E1] hover:bg-opacity-90 transition-colors text-white rounded-xl py-3 px-6",children:"Siguiente"})})]})]})},le=["Google","Redes sociales","Recomendaci√≥n","Publicidad online","Blog o art√≠culo","Evento o conferencia","Otro"],ie=({data:s,setData:n,setStep:u})=>{const c=t=>{if(t.preventDefault(),!s.medio){C.fire({icon:"warning",title:"Atenci√≥n",text:"Por favor selecciona una opci√≥n antes de continuar"});return}u("invite-team")};return e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:"text-4xl font-bold mb-2",children:["Una √∫ltima pregunta",e.jsx("br",{}),"¬øC√≥mo supiste de nosotros?"]}),e.jsx("p",{className:"text text-gray-600 mb-8",children:"Nos ayuda a entender mejor a nuestros usuarios"}),e.jsxs("form",{className:"flex flex-wrap gap-2 mb-2",onSubmit:c,children:[le.map(t=>{const a=s.medio==t;return e.jsxs("div",{className:`group border-2 ${a?"border-[#4621E1] bg-[#4621E1] bg-opacity-5":"border-[#BEC5FF]"} ps-3 py-1 pe-4 rounded-xl flex gap-1 items-center justify-center cursor-pointer transition-colors`,onClick:()=>n({...s,medio:t}),children:[a?e.jsx("i",{className:"mdi text-xl flex items-center justify-center mdi-check-circle text-[#4621E1] transition-all"}):e.jsx("i",{className:"mdi text-xl flex items-center justify-center mdi-circle-outline text-[#BEC5FF] transition-all"}),e.jsx("span",{children:t})]},t)}),e.jsx("div",{className:"flex w-full justify-end !mt-6",children:e.jsx("button",{type:"submit",className:"bg-[#4621E1] hover:bg-opacity-90 transition-colors text-white rounded-xl py-3 px-6",children:"Siguiente"})})]})]})},oe=({data:s,setData:n,setStep:u})=>{const[c,t]=x.useState(s.emails??[]),[a,i]=x.useState(""),d=()=>{n({...s,emails:c}),u("dashboard")};return x.useEffect(()=>{n({...s,emails:c})},[c]),e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-4xl font-bold mb-2",children:"Invita a tu equipo"}),e.jsx("p",{className:"text text-gray-600 mb-8",children:"Agrega miembros de tu equipo para colaborar (opcional)"}),e.jsx(j,{className:"items-end",label:"Ingresa email",type:"email",placeholder:"hola@mail.com",value:a,onChange:r=>{i(r.target.value)},onKeyDown:r=>{r.key==="Enter"&&(r.preventDefault(),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.target.value)&&(t([...new Set([...c,r.target.value])]),i("")))},required:!0,children:e.jsx("button",{className:"text-sm font-semibold underline text-[#4621E1]",onClick:()=>{/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)&&(t([...new Set([...c,a])]),i(""))},children:"Agregar"})}),c.length>0&&e.jsxs("div",{className:" bg-[#EBEFFF] mt-6 rounded-xl",children:[e.jsx("div",{className:"font-bold p-4 pb-0 text-sm",children:"Miembros invitados:"}),e.jsx("div",{className:"px-4 pb-2",children:c.map((r,p)=>e.jsxs("div",{className:`flex items-center gap-2 border-gray-300 py-2 w-full ${p!=0&&"border-t"}`,children:[e.jsx("div",{className:"flex-1 truncate",children:r}),e.jsx("button",{className:"flex-shrink-0 font-semibold text-sm text-red-600 hover:text-red-800",onClick:()=>{t(c.filter(o=>o!=r))},children:"Eliminar"})]},p))})]}),e.jsx("div",{className:"text-xs text-gray-600 leading-tight mt-4",children:"Puedes invitar m√°s miembrodivespu√©s desde la configuraci√≥n de tu cuenta"}),e.jsx("div",{className:"flex w-full justify-end !mt-6",children:e.jsx("button",{className:"bg-[#4621E1] hover:bg-opacity-90 transition-colors text-white rounded-xl py-3 px-6",onClick:d,children:c.length>0?"Siguiente":"Omitir"})})]})},ce=({data:s,setData:n,setStep:u})=>{const c=t=>{t.preventDefault(),u("columns")};return e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:"text-4xl font-bold mb-2",children:["Empecemos a trabajar ",e.jsx("br",{}),"Nombre de tu tablero"]}),e.jsx("p",{className:"text text-gray-600 mb-8",children:"Dale un nombre a tu tablero, por ejemplo, Plan de marketing, proceso de ventas, hoja de ruta trim...."}),e.jsxs("form",{onSubmit:c,children:[e.jsx(j,{className:"items-end",label:"Nombre de tu proyecto",placeholder:"Mi primer proyecto",value:s.projectName,onChange:t=>{n({...s,projectName:t.target.value})},required:!0}),e.jsxs("blockquote",{className:"bg-[#EBEFFF] p-4 rounded-lg mt-6",children:[e.jsxs("div",{className:"font-bold mb-2",children:[e.jsx("i",{className:"mdi mdi-lightbulb me-2"}),"Tip"]}),e.jsx("p",{className:"text-sm leading-tight",children:"Encontrar√°s todo tu contenido en los ‚Äútableros de Atalaya"})]}),e.jsx("div",{className:"flex w-full justify-end !mt-6",children:e.jsx("button",{type:"submit",className:"bg-[#4621E1] hover:bg-opacity-90 transition-colors text-white rounded-xl py-3 px-6",children:"Siguiente"})})]})]})},I=["Lead","Responsable","Correo","Tel√©fono","Estado de gesti√≥n","Estado del lead","Origen","A trav√©s de","Fecha de creaci√≥n"],de=({data:s,setData:n,setStep:u})=>{var t;const c=a=>{a.preventDefault(),u("manage")};return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-4xl font-bold mb-2",children:"Selecciona las columnas relevantes para tu tablero"}),e.jsx("p",{className:"text text-gray-600 mb-8",children:"Selecciona qu√© informaci√≥n quieres ver en tu CRM"}),e.jsxs("form",{className:"flex flex-wrap gap-2 mb-2",onSubmit:c,children:[I.map(a=>{var d;const i=(d=s.columns)==null?void 0:d.includes(a);return e.jsxs("div",{className:`group border-2 ${i?"border-[#4621E1] bg-[#4621E1] bg-opacity-5":"border-[#BEC5FF]"} ps-3 py-1 pe-4 rounded-xl flex gap-1 items-center justify-center cursor-pointer transition-colors`,onClick:()=>{var p;const r=i?(p=s.columns)==null?void 0:p.filter(o=>o!==a):[...s.columns??[],a];n({...s,columns:r.filter(o=>I.includes(o))})},children:[i?e.jsx("i",{className:"mdi text-xl flex items-center justify-center mdi-checkbox-marked-outline text-[#4621E1] transition-all"}):e.jsx("i",{className:"mdi text-xl flex items-center justify-center mdi-checkbox-blank-outline text-[#BEC5FF] transition-all"}),e.jsx("span",{children:a})]},a)}),e.jsx("div",{className:"w-full mt-2 overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsx("tr",{className:"border-b",children:(t=s.columns)==null?void 0:t.map((a,i)=>e.jsx("th",{className:"p-3 text-left text-sm font-medium text-gray-600 text-nowrap",children:a},i))})}),e.jsx("tbody",{children:[1,2].map(a=>{var i;return e.jsx("tr",{className:"border-b",children:(i=s.columns)==null?void 0:i.map((d,r)=>e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"})},r))},a)})})]})}),e.jsxs("blockquote",{className:"bg-[#EBEFFF] p-4 rounded-lg mt-6 w-full",children:[e.jsxs("div",{className:"font-bold mb-2",children:[e.jsx("i",{className:"mdi mdi-lightbulb me-2"}),"Tip"]}),e.jsx("p",{className:"text-sm leading-tight",children:"Averigua de un vistazo cu√°ndo y qui√©n actualiz√≥ el trabajo por √∫ltima vez"})]}),e.jsx("div",{className:"flex w-full justify-end !mt-6",children:e.jsx("button",{type:"submit",className:"bg-[#4621E1] hover:bg-opacity-90 transition-colors text-white rounded-xl py-3 px-6",children:"Siguiente"})})]})]})},me=["Pendiente","Atendiendo","No responde","Sin presupuesto"],ue=({data:s,setData:n,setStep:u})=>{const c=t=>{t.preventDefault(),u("statuses")};return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-4xl font-bold mb-2",children:"Que estados de gestion quieres ver en tu tablero"}),e.jsx("p",{className:"text text-gray-600 mb-8",children:"Define los estados para organizar tu proceso de ventas"}),e.jsxs("form",{className:"flex flex-wrap gap-2 mb-2",onSubmit:c,children:[me.map(t=>{var i;const a=(i=s.manageStatuses)==null?void 0:i.includes(t);return e.jsxs("div",{className:`group border-2 ${a?"border-[#4621E1] bg-[#4621E1] bg-opacity-5":"border-[#BEC5FF]"} ps-3 py-1 pe-4 rounded-xl flex gap-1 items-center justify-center cursor-pointer transition-colors`,onClick:()=>{var r;const d=a?(r=s.manageStatuses)==null?void 0:r.filter(p=>p!==t):[...s.manageStatuses??[],t];n({...s,manageStatuses:d})},children:[a?e.jsx("i",{className:"mdi text-xl flex items-center justify-center mdi-checkbox-marked-outline text-[#4621E1] transition-all"}):e.jsx("i",{className:"mdi text-xl flex items-center justify-center mdi-checkbox-blank-outline text-[#BEC5FF] transition-all"}),e.jsx("span",{children:t})]},t)}),e.jsxs("blockquote",{className:"bg-[#EBEFFF] p-4 rounded-lg mt-6 w-full",children:[e.jsxs("div",{className:"font-bold mb-2",children:[e.jsx("i",{className:"mdi mdi-lightbulb me-2"}),"Tip"]}),e.jsx("p",{className:"text-sm leading-tight",children:"Averigua de un vistazo cu√°ndo y qui√©n actualiz√≥ el trabajo por √∫ltima vez"})]}),e.jsx("div",{className:"flex w-full justify-end !mt-6",children:e.jsx("button",{type:"submit",className:"bg-[#4621E1] hover:bg-opacity-90 transition-colors text-white rounded-xl py-3 px-6",children:"Siguiente"})})]})]})},xe=["Nuevo","Gesti√≥n","Reuni√≥n","Propuesta","Decisi√≥n"],pe=({data:s,setData:n,setStep:u})=>{var t;const c=a=>{a.preventDefault(),u("thanks")};return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-4xl font-bold mb-2",children:"Qu√© estapas de lead necesitar tener a la mano"}),e.jsx("p",{className:"text text-gray-600 mb-8",children:"Configura las etapas del embudo de conversi√≥n"}),e.jsxs("form",{className:"flex flex-wrap gap-2 mb-2",onSubmit:c,children:[structuredClone(xe).map(a=>{var d;const i=(d=s.statuses)==null?void 0:d.includes(a);return e.jsxs("div",{className:`group border-2 ${i?"border-[#4621E1] bg-[#4621E1] bg-opacity-5":"border-[#BEC5FF]"} ps-3 py-1 pe-4 rounded-xl flex gap-1 items-center justify-center cursor-pointer transition-colors`,onClick:()=>{var p;const r=i?(p=s.statuses)==null?void 0:p.filter(o=>o!==a):[...s.statuses??[],a];n({...s,statuses:r})},children:[i?e.jsx("i",{className:"mdi text-xl flex items-center justify-center mdi-checkbox-marked-outline text-[#4621E1] transition-all"}):e.jsx("i",{className:"mdi text-xl flex items-center justify-center mdi-checkbox-blank-outline text-[#BEC5FF] transition-all"}),e.jsx("span",{children:a})]},a)}),e.jsx("div",{className:"w-full mt-2 overflow-x-auto",children:e.jsx("div",{className:"flex gap-4",children:(t=s.statuses)==null?void 0:t.map((a,i)=>e.jsxs("div",{className:"flex-1 min-w-[150px]",children:[e.jsx("div",{className:"text-sm font-medium text-gray-600 mb-3",children:a}),e.jsx("div",{className:"space-y-2",children:[1,2].map(d=>e.jsxs("div",{className:"bg-gray-200 h-16 rounded-lg animate-pulse p-2",children:[e.jsx("div",{className:"h-4 w-3/4 bg-gray-300 rounded mb-2"}),e.jsx("div",{className:"h-3 w-1/2 bg-gray-300 rounded"})]},d))})]},i))})}),e.jsxs("blockquote",{className:"bg-[#EBEFFF] p-4 rounded-lg mt-6 w-full",children:[e.jsxs("div",{className:"font-bold mb-2",children:[e.jsx("i",{className:"mdi mdi-lightbulb me-2"}),"Tip"]}),e.jsx("p",{className:"text-sm leading-tight",children:'Encontrar√°s todo tu contenido en los "tableros de Atalaya"'})]}),e.jsx("div",{className:"flex w-full justify-end !mt-6",children:e.jsx("button",{type:"submit",className:"bg-[#4621E1] hover:bg-opacity-90 transition-colors text-white rounded-xl py-3 px-6",children:"Finalizar configuraci√≥n"})})]})]})},he=()=>e.jsxs("div",{className:"bg-white rounded-xl max-w-sm w-full mx-auto p-6 text-center",children:[e.jsx("i",{className:"mdi mdi-check mdi-36px w-14 h-14 bg-[#DBE0FF] mx-auto mb-6 rounded-2xl flex items-center justify-center text-[#4621E1]"}),e.jsxs("h2",{className:"text-4xl font-bold mb-4",children:["¬°Bienvenido a ",e.jsx("span",{className:"text-[#FE4611]",children:"Atalaya"}),"!"]}),e.jsx("p",{className:"leading-tight mb-6 text-gray-600",children:"Tu cuenta ha sido configurada exitosamente. Est√°s listo para comenzar a gestionar tus clientes y hacer crecer tu negocio."}),e.jsxs("div",{className:"space-y-2 mb-6",children:[e.jsx("button",{className:"w-full block border-2 border-[#4621E1] bg-[#4621E1] hover:bg-opacity-90 transition-colors font-semibold text-white rounded-xl py-3 px-6",children:"Ir al Dashboard"}),e.jsx("button",{className:"w-full block border-2 border-[#4621E1] transition-colors text-[#4621E1] hover:bg-[#4621E1] hover:text-white font-semibold rounded-xl py-3 px-6",children:"Ver tutorial"})]}),e.jsxs("p",{className:"leading-tight text-[#4621E1] text-sm",children:[e.jsx("span",{className:"font-bold",children:"üí° Pr√≥ximos pasos:"})," Importa tus contactos existentes o comienza agregando tu primer lead."]})]}),ge=new P,be=({jsEncrypt:s,services:n,setService:u})=>{const[c,t]=x.useState(null),[a,i]=x.useState(null),[d,r]=x.useState(!1),p=async o=>{o.preventDefault(),console.log({email:c,password:a});const{status:m,message:h,data:g}=await ge.login({email:s.encrypt(c),password:s.encrypt(a)});m||X(h,{icon:e.jsx("i",{className:"mdi mdi-alert text-[#FE4611]"})}),g?location.href=`//${g}.${D.APP_DOMAIN}/home`:location.reload()};return e.jsxs(e.Fragment,{children:[e.jsx(Y,{}),e.jsx("div",{className:"h-full grid items-center",children:e.jsxs("div",{className:"bg-white block rounded-xl max-w-sm w-full mx-auto p-6 shadow-lg",children:[e.jsx("i",{className:"mdi mdi-account mdi-36px w-14 h-14 bg-[#DBE0FF] mx-auto mb-6 rounded-2xl flex items-center justify-center text-[#4621E1]"}),e.jsxs("h2",{className:"text-3xl font-bold mb-2 text-center w-full",children:["Bienvenido a Atala",e.jsx("span",{className:"text-[#FE4611]",children:"y"}),"a"]}),e.jsx("p",{className:"text-gray-600 text-center mb-6",children:"Tu plataforma de gesti√≥n integral"}),e.jsxs("form",{className:"space-y-4 mb-6",onSubmit:p,children:[e.jsx(j,{label:"Correo Electr√≥nico",icon:"mdi mdi-email",placeholder:"correo@ejemplo.com",value:c,onChange:o=>t(o.target.value),required:!0}),e.jsx(j,{label:"Contrase√±a",icon:"mdi mdi-lock",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",type:"password",value:a,onChange:o=>i(o.target.value),required:!0}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",className:"text-sm text-gray-600 hover:text-[#4621E1]",children:"¬øOlvidaste tu contrase√±a?"})}),e.jsx("button",{type:"submit",className:"w-full block border-2 border-[#4621E1] bg-[#4621E1] hover:bg-opacity-90 transition-colors font-semibold text-white rounded-xl py-2 px-6",children:"Iniciar Sesi√≥n"})]}),e.jsx("div",{className:"text-center space-y-4",children:e.jsx("button",{className:"text-[#4621E1] hover:underline text-sm",onClick:()=>r(!0),children:"¬øNo tienes una cuenta? Reg√≠strate"})})]})}),e.jsx(Z,{modalOpen:d,onRequestClose:()=>r(!1),services:n,onServiceClicked:o=>u(o)})]})},fe=({PUBLIC_RSA_KEY:s,prefixes:n,correlative:u,services:c,service:t,authView:a})=>{const i=new Q;i.setPublicKey(s);const[d,r]=x.useState(t),[p,o]=x.useState(a),[m,h]=x.useState(q.Session.get("join-data")??{documentType:"DNI",phonePrefix:"51"}),g=()=>{switch(p){case"login":return e.jsx(be,{setStep:o,jsEncrypt:i,services:c,correlative:u,setService:r});case"account":return e.jsx(M,{data:m,setData:h,setStep:o,jsEncrypt:i,setService:r});case"business":return e.jsx(ae,{data:m,setData:h,setStep:o,jsEncrypt:i,prefixes:n});case"usage":return e.jsx(ne,{data:m,setData:h,setStep:o});case"survey":return e.jsx(ie,{data:m,setData:h,setStep:o});case"invite-team":return e.jsx(oe,{data:m,setData:h,setStep:o});case"dashboard":return e.jsx(ce,{data:m,setData:h,setStep:o});case"columns":return e.jsx(de,{data:m,setData:h,setStep:o});case"manage":return e.jsx(ue,{data:m,setData:h,setStep:o});case"statuses":return e.jsx(pe,{data:m,setData:h,setStep:o});case"thanks":return e.jsx(he,{data:m,setData:h,setStep:o});default:return e.jsx(M,{data:m,setData:h,setStep:o,jsEncrypt:i})}};return x.useEffect(()=>{q.Session.set("join-data",m)},[m]),x.useEffect(()=>{const v=window.location.pathname,N=d==null?void 0:d.correlative;if(d){v!==`/join/${N}`&&history.pushState({},"",`/join/${N}`);const b=c.some(l=>l.correlative===N);o(b?"account":"login")}else v!=="/join"&&history.pushState({},"","/join"),o("login")},[d]),x.useEffect(()=>{const v=()=>{const b=window.location.pathname,l=b.match(/\/join\/(.+)/),f=c.find(y=>y.correlative===(l==null?void 0:l[1]));b!="/join"&&f?r(f):r(null)},N=()=>{const b=window.location.pathname;if(b=="/join")r(null);else{const l=b.match(/\/join\/(.+)/);if(l){const f=c.find(y=>y.correlative===l[1]);f&&r(f)}}};return window.addEventListener("popstate",v),window.addEventListener("locationchange",N),()=>{window.removeEventListener("popstate",v),window.removeEventListener("locationchange",N)}},[]),x.useEffect(()=>{d?document.title=`Join ${d.name} | Atalaya`:document.title="Join | Atalaya"},[null]),e.jsx(se,{step:p,setStep:o,children:g()})};z((s,n)=>{R(s).render(e.jsx(fe,{...n}))});
