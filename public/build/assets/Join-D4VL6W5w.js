import{j as e}from"./Accordion-B0xeqd_u.js";import{r as h}from"./index-B80Lgev0.js";import{c as J}from"./ReactAppend-Da6mr3zD.js";import{G as V,C as U}from"./CreateReactScript-wxngZ06p.js";import{P as W,B as G,U as _,S as H,I as K,D as Q,C as Y,M as X,a as Z}from"./statuses-image-DRZxZZRY.js";import{m as A}from"./main-DtAlmsP1.js";import{D as z,I as g,P as ee}from"./PeopleRest-d9GYX1s_.js";import{A as I}from"./AuthRest-CzS3X5Ou.js";import{i as M}from"./tippy-react.esm-PO7soYrD.js";import"./TippyButton-DN-nzi_f.js";import{S as w}from"./SurveyStep-C1GxQ1hd.js";import{T as L,t as O}from"./index-BK7CmI7H.js";import{J as se}from"./JSEncrypt-D3I3x59l.js";import{S as te}from"./ServicesModal-NsFMdPvs.js";import"./index-STwnHZb6.js";import"./index.esm-X2U-7gJn.js";import"./___vite-browser-external_commonjs-proxy-C9-083JZ.js";import"./server.browser-bIzDeQez.js";import"./BusinessIWorkCard-CmzstVqU.js";const ae=({value:s,className:n})=>e.jsx("div",{className:`h-2 bg-[#BEC5FF] w-full rounded-full ${n}`,children:e.jsx("div",{className:"bg-[#4621E1] h-full rounded-full transition-all",style:{width:`${s}%`}})}),T=[{key:"account",color:"#4621E1",image:W},{key:"business",color:"#FF6C37",image:G},{key:"usage",color:"#50C4FF",image:_,showProgressBar:!0},{key:"survey",color:"#5633FE",image:H,showProgressBar:!0},{key:"invite-team",color:"#FF6C37",image:K,showProgressBar:!0},{key:"dashboard",color:"#4621E1",image:Q,showProgressBar:!0},{key:"columns",color:"#50C4FF",image:Y,showProgressBar:!0},{key:"manage",color:"#5633FE",image:X,showProgressBar:!0},{key:"statuses",color:"#FF6C37",image:Z,showProgressBar:!0}],R=T.map(s=>s.key),ne=({children:s,step:n,setStep:x})=>{const{color:o,image:i,showProgressBar:t}=T.find(c=>c.key===n)||{},r=R.indexOf(n),d=()=>{let c=r-1;if(c<0)return location.replace("/");x(R[c])},a=T.filter(({showProgressBar:c})=>c),l=(a.findIndex(({key:c})=>c==n)+1)/(a.length+1)*100;return e.jsxs("main",{className:"text-[#000938] bg-no-repeat bg-cover bg-fixed bg-center",style:{},children:[e.jsx("header",{className:"bg-white shadow-lg",children:e.jsxs("div",{className:"max-w-7xl w-full mx-auto relative flex items-center justify-center py-4 px-4 sm:px-6 lg:px-8",children:[n!="thanks"&&n!="login"&&e.jsxs("button",{className:"absolute left-4 sm:left-6 lg:left-8 px-2 flex items-center hover:bg-gray-100 rounded-full",onClick:d,children:[e.jsx("i",{className:"mdi mdi-chevron-left mdi-24px"}),e.jsx("span",{className:"hidden md:block mx-2",children:r==0?"Volver a inicio":"Volver"}),r==0&&e.jsx("span",{className:"block md:hidden mx-2",children:"Inicio"})]}),e.jsx("a",{href:"/",className:"transition-transform hover:scale-105",children:e.jsx("img",{src:"/assets/img/logo-dark.svg",alt:"",style:{height:"32px"}})})]})}),e.jsxs("section",{className:"relative bg-[#f8f8f8]",children:[e.jsx("img",{className:"absolute top-0 left-0 w-full h-full z-0",src:"/assets/img/background-auth.png"}),e.jsxs("div",{className:` max-w-7xl mx-auto flex flex-col md:flex-row z-10 ${n=="thanks"||n=="login"?"items-center justify-center":"items-start"}`,children:[e.jsxs("div",{className:`relative h-[calc(100vh-144px)] md:h-[calc(100vh-116px)] overflow-y-auto w-full p-6 md:p-12 z-10  ${n=="thanks"||n=="login"?"justify-center items-center":"md:w-1/2  justify-start"}`,children:[t&&e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"mb-8",value:l}),e.jsx("img",{src:"//crm.atalaya.localhost/assets/img/logo-dark.svg",alt:"Atalaya CRM",className:"h-8 w-max mb-8",onError:c=>c.target.src="/assets/img/logo-dark.svg"})]}),s]}),n!="thanks"&&n!="login"&&e.jsx("div",{className:"hidden md:absolute left-1/2 right-0 bottom-0 top-0 p-10 md:flex items-center justify-center transition-colors",style:{backgroundColor:o},children:e.jsx("img",{src:i,alt:"Atalaya Join image",className:"max-w-[420px] w-full h-full max-h-[360px] object-contain transition-all animate-bounce animate-duration-[10s]"})})]})]}),e.jsx("footer",{className:"bg-white shadow-lg",children:e.jsxs("div",{className:"max-w-7xl w-full mx-auto relative flex flex-col md:flex-row gap-2 items-center justify-between py-4 px-4 sm:px-6 lg:px-8 text-sm",children:[e.jsxs("span",{children:[new Date().getFullYear()," © Atalaya | Propiedad de ",e.jsx("a",{href:"//mundoweb.pe",target:"_blank",className:"text-[#fe4611]",children:"MundoWeb"})]}),e.jsx("span",{children:"Powered By MundoWeb"})]})})]})},q=new I,ie=new ee,$=({data:s,setData:n,setStep:x,setService:o,jsEncrypt:i})=>{const[t,r]=h.useState(!1),[d,a]=h.useState(!1),[m,l]=h.useState(null),[c,p]=h.useState(""),[E,N]=h.useState(s.email),[b,f]=h.useState(!1),j=async u=>{if(u.preventDefault(),!E){w.fire({title:"Verificación requerida",text:"Primero debes verificar tu correo electrónico",icon:"warning",showCancelButton:!0,confirmButtonText:"Verificar ahora",cancelButtonText:"Cancelar",customClass:{confirmButton:"bg-[#4621E1] text-white",cancelButton:"bg-[#FE4611] text-white"}}).then(v=>{v.isConfirmed&&y()});return}r(!0),l(null);const{status:C,message:S,type:F}=await q.userExists({email:s.email,password:i.encrypt(s.password),passwordConfirm:i.encrypt(s.passwordConfirm)});if(r(!1),!C){l(F),p(S);return}x("business")},y=async()=>{l(null),a(!0);const{status:u,message:C,summary:S}=await q.sendCode({email:s.preEmail});if(a(!1),!u){l(S.type),p(C);return}const{value:F}=await w.fire({title:"Verificación de Correo",html:`
                <p class="text-base text-[#000938] leading-tight">Por favor, ingresa el código enviado a <b>${s.preEmail}</b> para verificar tu identidad y continuar con el registro</p>
            `,input:"text",inputPlaceholder:"Ingresa el código",inputAttributes:{maxlength:6},showCancelButton:!0,confirmButtonText:"Verificar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0,preConfirm:async v=>{if(!v)return w.showValidationMessage("El código es requerido");if(v.length<6)return w.showValidationMessage("El código debe tener 6 caracteres");const{status:P,message:B}=await q.verifyEmail({email:s.preEmail,code:v});return P||w.showValidationMessage(B),N(!0),s.preEmail},customClass:{popup:"verification-modal",title:"text-3xl font-bold text-[#000938]",input:"text-base px-3 py-2 text-[#000938] uppercase text-center",confirmButton:"bg-[#4621E1] text-white",cancelButton:"bg-[#FE4611] text-white",loader:"mdi mdi-loading mdi-spin"},didOpen:()=>{const v=document.querySelector(".swal2-input");v.addEventListener("paste",P=>{P.preventDefault();const B=P.clipboardData.getData("text").replace(/\s/g,"");v.value=B})}});n(v=>({...v,email:F}))},k=async()=>{f(!1);const u=await ie.search(s.documentType,s.documentNumber);if(!u)return f(null);f(!0),n({...s,name:u.name,lastname:u.lastname})};return h.useEffect(()=>{var C,S;n(F=>({...F,name:"",lastname:""})),(s.documentType==="DNI"&&((C=s.documentNumber)==null?void 0:C.length)===8||s.documentType==="CE"&&((S=s.documentNumber)==null?void 0:S.length)===9)&&k()},[s.documentType,s.documentNumber]),e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-4xl font-bold mb-2",children:"Crea tu cuenta"}),e.jsx("p",{className:"text text-gray-600 mb-8",children:"Necesitamos algunos datos para personalizar tu experiencia"}),e.jsxs("form",{className:"space-y-4 mb-2",onSubmit:j,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(z,{label:"Tipo de doc.",icon:"mdi mdi-badge-account-horizontal-outline",value:s.documentType,values:["DNI","CE"],onChange:u=>n({...s,documentType:u.target.value}),required:!0,disabled:t}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(g,{label:"Número de documento",placeholder:"00000000",value:s.documentNumber,onChange:u=>n({...s,documentNumber:u.target.value}),required:!0,maxLength:s.documentType==="DNI"?8:9,minLength:s.documentType==="DNI"?8:9,disabled:t})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(g,{label:"Nombres",placeholder:"Nombre",value:s.name,onChange:u=>n({...s,name:u.target.value}),required:!0,disabled:t||b!==null}),e.jsx(g,{label:"Apellidos",placeholder:"Apellido",value:s.lastname,onChange:u=>n({...s,lastname:u.target.value}),required:!0,disabled:t||b!==null})]}),e.jsx("div",{className:"relative",children:e.jsx(g,{className:"items-end",label:"E-mail",placeholder:"correo@ejemplo.com",value:s.preEmail,onChange:u=>n({...s,preEmail:u.target.value}),invalid:m=="email",invalidText:c,required:!0,disabled:t||d||E,onKeyDown:u=>{u.key==="Enter"&&(u.preventDefault(),y())},children:E?e.jsx("i",{className:"mdi mdi-check text-[#4621E1] font-bold"}):e.jsx(M,{content:"Verificar email",children:e.jsx("button",{type:"button",className:"text-sm text-nowrap font-semibold underline text-[#4621E1] outline-none disabled:opacity-90 disabled:cursor-not-allowed",onClick:y,disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"mdi mdi-spin mdi-loading"}),"Enviando código"]}):"Verificar"})})})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(g,{label:"Contraseña",placeholder:"••••••••",type:"password",value:s.password,onChange:u=>n({...s,password:u.target.value}),invalid:m=="password",invalidText:c,required:!0,disabled:t}),e.jsx(g,{label:"Confirmar",placeholder:"••••••••",type:"password",value:s.passwordConfirm,onChange:u=>n({...s,passwordConfirm:u.target.value}),invalid:m=="password",invalidText:c,required:!0,disabled:t})]}),e.jsx("button",{type:"submit",className:"w-full !mt-6 bg-[#4621E1] hover:bg-opacity-90 transition-colors text-white rounded-xl py-3 disabled:cursor-not-allowed",disabled:t,children:t?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"mdi mdi-loading mdi-spin"})," Verificando"]}):"Continuar"})]}),e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("p",{className:"text-sm",children:["Al continuar, aceptas nuestros ",e.jsx("a",{href:"#",className:"text-[#fe4611] underline",children:"Términos de servicio"})," y ",e.jsx("a",{href:"#",className:"text-[#fe4611] underline",children:"Políticas de Privacidad"})]}),e.jsx(M,{content:"Ya tiene una cuenta?",children:e.jsx("button",{type:"button",onClick:()=>o(null),className:"text-sm text-nowrap text-[#4621E1] hover:underline",children:"Inicia sesión"})})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("b",{className:"block",children:"¿Necesitas ayuda para elegir?"}),e.jsx("span",{className:"text-gray-600",children:"Nuestro equipo está aquí para ayudarte."})]}),e.jsx("a",{href:"#",className:"text-[#4621E1] underline",children:"Hablar con Ventas"})]})},re=new I,le=({data:s,setData:n,setStep:x,prefixes:o=[],jsEncrypt:i})=>{const[t,r]=h.useState(!1),d=async a=>{a.preventDefault(),r(!0);const{status:m,message:l,data:c}=await re.register({...s,password:i.encrypt(s.password),passwordConfirm:i.encrypt(s.passwordConfirm)});if(!m){r(!1),O(l,{icon:e.jsx("i",{className:"mdi mdi-alert text-red-600"})});return}location.href=`//${c}.${V.APP_DOMAIN}/join`,n({documentType:"DNI",phonePrefix:"51"}),Session.delete("join-data")};return e.jsxs(e.Fragment,{children:[e.jsx(L,{}),e.jsx("h2",{className:"text-4xl font-bold mb-2",children:"Información de tu empresa"}),e.jsx("p",{className:"text text-gray-600 mb-8",children:"Completa los datos de tu empresa para personalizar tu experiencia"}),e.jsxs("form",{className:"space-y-4 mb-6",onSubmit:d,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(g,{label:"RUC",placeholder:"00000000000",value:s.ruc,onChange:a=>n({...s,ruc:a.target.value}),disabled:t,required:!0}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(g,{label:"Nombre Comercial",placeholder:"Mi Empresa",value:s.commercialName,onChange:a=>n({...s,commercialName:a.target.value}),disabled:t,required:!0})})]}),e.jsx(g,{label:"Razón Social",placeholder:"Mi Empresa S.A.C.",value:s.businessName,onChange:a=>n({...s,businessName:a.target.value}),disabled:t,required:!0}),e.jsx(g,{icon:"mdi mdi-map-marker",label:"Dirección",placeholder:"Av. Empresarial 456, San Isidro",value:s.address,onChange:a=>n({...s,address:a.target.value}),disabled:t,required:!0}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(z,{label:"Prefijo",icon:"mdi mdi-flag",value:s.phonePrefix,values:o.map(a=>({value:a.realCode,label:e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-emoji w-6 inline-block",children:a.flag}),e.jsx("span",{className:"font-semibold",children:a.country}),e.jsx("span",{className:"text-gray-600 text-xs ms-1",children:a.beautyCode})]})})),onChange:a=>n({...s,phonePrefix:a.target.value}),searchable:!0,disabled:t}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(g,{icon:"mdi mdi-phone",label:"Teléfono",placeholder:"000000000",type:"tel",value:s.phone,onChange:a=>n({...s,phone:a.target.value}),disabled:t,required:!0})})]}),e.jsx("button",{type:"submit",className:"w-full !mt-6 bg-[#4621E1] hover:bg-opacity-90 transition-colors text-white rounded-xl py-3",disabled:t,children:t?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"mdi mdi-loading mdi-spin me-1"}),"Verificando"]}):"Continuar"})]}),e.jsxs("blockquote",{className:"bg-[#EBEFFF] p-4 rounded-lg mb-6",children:[e.jsxs("div",{className:"font-bold mb-2",children:[e.jsx("i",{className:"mdi mdi-lightbulb me-2"}),"Tip"]}),e.jsx("p",{className:"text-sm leading-tight",children:"Esta información nos ayudará a configurar tu CRM con las mejores prácticas para tu industria."})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("b",{className:"block",children:"¿Necesitas ayuda para elegir?"}),e.jsx("span",{className:"text-gray-600",children:"Nuestro equipo está aquí para ayudarte."})]}),e.jsx("a",{href:"#",className:"text-[#4621E1] underline",children:"Hablar con Ventas"})]})},oe=[{key:"personal",icon:"mdi mdi-account-outline",name:"Personal",description:"Para uso individual y freelancers"},{key:"startup",icon:"mdi mdi-flash-outline",name:"Emprendimiento",description:"Para startups y proyectos emergentes"},{key:"business",icon:"mdi mdi-account-group-outline",name:"Negocio",description:"Para empresas y equipos comerciales"}],ce=({data:s,setData:n,setStep:x})=>{const o=i=>{if(i.preventDefault(),!s.accountType){w.fire({icon:"warning",title:"Atención",text:"Por favor selecciona una opción antes de continuar"});return}x("survey")};return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-4xl font-bold mb-2",children:"Hola, ¿cómo planeas usar Atalaya CRM?"}),e.jsx("p",{className:"text text-gray-600 mb-8",children:"Esto nos ayudará a personalizar tu experiencia"}),e.jsxs("form",{className:"space-y-4 mb-2",onSubmit:o,children:[oe.map(i=>e.jsxs("div",{className:"select-none",children:[e.jsx("input",{type:"radio",name:"accountType",id:`type-${i.key}`,value:i.key,checked:i.key==s.accountType,className:"hidden peer",onChange:t=>n({...s,accountType:t.target.value}),required:!0}),e.jsxs("label",{htmlFor:`type-${i.key}`,className:"p-4 group flex items-center gap-2 border-2 border-[#BEC5FF] rounded-xl bg-white cursor-pointer transition-colors peer-checked:border-[#4621E1]",children:[e.jsx("i",{className:`${i.icon} text-2xl w-10 h-10 rounded-lg flex items-center justify-center ${i.key==s.accountType?"bg-[#4621E1] text-white":"bg-[#DBE0FF] text-[#4621E1]"} transition-colors`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("b",{className:"block",children:i.name}),e.jsx("small",{className:"block",children:i.description})]})]})]},i.key)),e.jsx("div",{className:"flex w-full justify-end !mt-6",children:e.jsx("button",{type:"submit",className:"bg-[#4621E1] hover:bg-opacity-90 transition-colors text-white rounded-xl py-3 px-6",children:"Siguiente"})})]})]})},de=["Google","Redes sociales","Recomendación","Publicidad online","Blog o artículo","Evento o conferencia","Otro"],me=({data:s,setData:n,setStep:x})=>{const o=i=>{if(i.preventDefault(),!s.medio){w.fire({icon:"warning",title:"Atención",text:"Por favor selecciona una opción antes de continuar"});return}x("invite-team")};return e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:"text-4xl font-bold mb-2",children:["Una última pregunta",e.jsx("br",{}),"¿Cómo supiste de nosotros?"]}),e.jsx("p",{className:"text text-gray-600 mb-8",children:"Nos ayuda a entender mejor a nuestros usuarios"}),e.jsxs("form",{className:"flex flex-wrap gap-2 mb-2",onSubmit:o,children:[de.map(i=>{const t=s.medio==i;return e.jsxs("div",{className:`group border-2 ${t?"border-[#4621E1] bg-[#4621E1] bg-opacity-5":"border-[#BEC5FF]"} ps-3 py-1 pe-4 rounded-xl flex gap-1 items-center justify-center cursor-pointer transition-colors`,onClick:()=>n({...s,medio:i}),children:[t?e.jsx("i",{className:"mdi text-xl flex items-center justify-center mdi-check-circle text-[#4621E1] transition-all"}):e.jsx("i",{className:"mdi text-xl flex items-center justify-center mdi-circle-outline text-[#BEC5FF] transition-all"}),e.jsx("span",{children:i})]},i)}),e.jsx("div",{className:"flex w-full justify-end !mt-6",children:e.jsx("button",{type:"submit",className:"bg-[#4621E1] hover:bg-opacity-90 transition-colors text-white rounded-xl py-3 px-6",children:"Siguiente"})})]})]})},ue=({data:s,setData:n,setStep:x})=>{const[o,i]=h.useState(s.emails??[]),[t,r]=h.useState(""),d=()=>{n({...s,emails:o}),x("dashboard")};return h.useEffect(()=>{n({...s,emails:o})},[o]),e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-4xl font-bold mb-2",children:"Invita a tu equipo"}),e.jsx("p",{className:"text text-gray-600 mb-8",children:"Agrega miembros de tu equipo para colaborar (opcional)"}),e.jsx(g,{className:"items-end",label:"Ingresa email",type:"email",placeholder:"hola@mail.com",value:t,onChange:a=>{r(a.target.value)},onKeyDown:a=>{a.key==="Enter"&&(a.preventDefault(),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.target.value)&&(i([...new Set([...o,a.target.value])]),r("")))},required:!0,children:e.jsx("button",{className:"text-sm font-semibold underline text-[#4621E1]",onClick:()=>{/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)&&(i([...new Set([...o,t])]),r(""))},children:"Agregar"})}),o.length>0&&e.jsxs("div",{className:" bg-[#EBEFFF] mt-6 rounded-xl",children:[e.jsx("div",{className:"font-bold p-4 pb-0 text-sm",children:"Miembros invitados:"}),e.jsx("div",{className:"px-4 pb-2",children:o.map((a,m)=>e.jsxs("div",{className:`flex items-center gap-2 border-gray-300 py-2 w-full ${m!=0&&"border-t"}`,children:[e.jsx("div",{className:"flex-1 truncate",children:a}),e.jsx("button",{className:"flex-shrink-0 font-semibold text-sm text-red-600 hover:text-red-800",onClick:()=>{i(o.filter(l=>l!=a))},children:"Eliminar"})]},m))})]}),e.jsx("div",{className:"text-xs text-gray-600 leading-tight mt-4",children:"Puedes invitar más miembrodivespués desde la configuración de tu cuenta"}),e.jsx("div",{className:"flex w-full justify-end !mt-6",children:e.jsx("button",{className:"bg-[#4621E1] hover:bg-opacity-90 transition-colors text-white rounded-xl py-3 px-6",onClick:d,children:o.length>0?"Siguiente":"Omitir"})})]})},xe=({data:s,setData:n,setStep:x})=>{const o=i=>{i.preventDefault(),x("columns")};return e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:"text-4xl font-bold mb-2",children:["Empecemos a trabajar ",e.jsx("br",{}),"Nombre de tu tablero"]}),e.jsx("p",{className:"text text-gray-600 mb-8",children:"Dale un nombre a tu tablero, por ejemplo, Plan de marketing, proceso de ventas, hoja de ruta trim...."}),e.jsxs("form",{onSubmit:o,children:[e.jsx(g,{className:"items-end",label:"Nombre de tu proyecto",placeholder:"Mi primer proyecto",value:s.projectName,onChange:i=>{n({...s,projectName:i.target.value})},required:!0}),e.jsxs("blockquote",{className:"bg-[#EBEFFF] p-4 rounded-lg mt-6",children:[e.jsxs("div",{className:"font-bold mb-2",children:[e.jsx("i",{className:"mdi mdi-lightbulb me-2"}),"Tip"]}),e.jsx("p",{className:"text-sm leading-tight",children:"Encontrarás todo tu contenido en los “tableros de Atalaya"})]}),e.jsx("div",{className:"flex w-full justify-end !mt-6",children:e.jsx("button",{type:"submit",className:"bg-[#4621E1] hover:bg-opacity-90 transition-colors text-white rounded-xl py-3 px-6",children:"Siguiente"})})]})]})},D=["Lead","Responsable","Correo","Teléfono","Estado de gestión","Estado del lead","Origen","A través de","Fecha de creación"],pe=({data:s,setData:n,setStep:x})=>{var i;const o=t=>{t.preventDefault(),x("manage")};return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-4xl font-bold mb-2",children:"Selecciona las columnas relevantes para tu tablero"}),e.jsx("p",{className:"text text-gray-600 mb-8",children:"Selecciona qué información quieres ver en tu CRM"}),e.jsxs("form",{className:"flex flex-wrap gap-2 mb-2",onSubmit:o,children:[D.map(t=>{var d;const r=(d=s.columns)==null?void 0:d.includes(t);return e.jsxs("div",{className:`group border-2 ${r?"border-[#4621E1] bg-[#4621E1] bg-opacity-5":"border-[#BEC5FF]"} ps-3 py-1 pe-4 rounded-xl flex gap-1 items-center justify-center cursor-pointer transition-colors`,onClick:()=>{var m;const a=r?(m=s.columns)==null?void 0:m.filter(l=>l!==t):[...s.columns??[],t];n({...s,columns:a.filter(l=>D.includes(l))})},children:[r?e.jsx("i",{className:"mdi text-xl flex items-center justify-center mdi-checkbox-marked-outline text-[#4621E1] transition-all"}):e.jsx("i",{className:"mdi text-xl flex items-center justify-center mdi-checkbox-blank-outline text-[#BEC5FF] transition-all"}),e.jsx("span",{children:t})]},t)}),e.jsx("div",{className:"w-full mt-2 overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsx("tr",{className:"border-b",children:(i=s.columns)==null?void 0:i.map((t,r)=>e.jsx("th",{className:"p-3 text-left text-sm font-medium text-gray-600 text-nowrap",children:t},r))})}),e.jsx("tbody",{children:[1,2].map(t=>{var r;return e.jsx("tr",{className:"border-b",children:(r=s.columns)==null?void 0:r.map((d,a)=>e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"})},a))},t)})})]})}),e.jsxs("blockquote",{className:"bg-[#EBEFFF] p-4 rounded-lg mt-6 w-full",children:[e.jsxs("div",{className:"font-bold mb-2",children:[e.jsx("i",{className:"mdi mdi-lightbulb me-2"}),"Tip"]}),e.jsx("p",{className:"text-sm leading-tight",children:"Averigua de un vistazo cuándo y quién actualizó el trabajo por última vez"})]}),e.jsx("div",{className:"flex w-full justify-end !mt-6",children:e.jsx("button",{type:"submit",className:"bg-[#4621E1] hover:bg-opacity-90 transition-colors text-white rounded-xl py-3 px-6",children:"Siguiente"})})]})]})},he=["Pendiente","Atendiendo","No responde","Sin presupuesto"],ge=({data:s,setData:n,setStep:x})=>{const o=i=>{i.preventDefault(),x("statuses")};return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-4xl font-bold mb-2",children:"Que estados de gestion quieres ver en tu tablero"}),e.jsx("p",{className:"text text-gray-600 mb-8",children:"Define los estados para organizar tu proceso de ventas"}),e.jsxs("form",{className:"flex flex-wrap gap-2 mb-2",onSubmit:o,children:[he.map(i=>{var r;const t=(r=s.manageStatuses)==null?void 0:r.includes(i);return e.jsxs("div",{className:`group border-2 ${t?"border-[#4621E1] bg-[#4621E1] bg-opacity-5":"border-[#BEC5FF]"} ps-3 py-1 pe-4 rounded-xl flex gap-1 items-center justify-center cursor-pointer transition-colors`,onClick:()=>{var a;const d=t?(a=s.manageStatuses)==null?void 0:a.filter(m=>m!==i):[...s.manageStatuses??[],i];n({...s,manageStatuses:d})},children:[t?e.jsx("i",{className:"mdi text-xl flex items-center justify-center mdi-checkbox-marked-outline text-[#4621E1] transition-all"}):e.jsx("i",{className:"mdi text-xl flex items-center justify-center mdi-checkbox-blank-outline text-[#BEC5FF] transition-all"}),e.jsx("span",{children:i})]},i)}),e.jsxs("blockquote",{className:"bg-[#EBEFFF] p-4 rounded-lg mt-6 w-full",children:[e.jsxs("div",{className:"font-bold mb-2",children:[e.jsx("i",{className:"mdi mdi-lightbulb me-2"}),"Tip"]}),e.jsx("p",{className:"text-sm leading-tight",children:"Averigua de un vistazo cuándo y quién actualizó el trabajo por última vez"})]}),e.jsx("div",{className:"flex w-full justify-end !mt-6",children:e.jsx("button",{type:"submit",className:"bg-[#4621E1] hover:bg-opacity-90 transition-colors text-white rounded-xl py-3 px-6",children:"Siguiente"})})]})]})},be=["Nuevo","Gestión","Reunión","Propuesta","Decisión"],fe=({data:s,setData:n,setStep:x})=>{var i;const o=t=>{t.preventDefault(),x("thanks")};return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-4xl font-bold mb-2",children:"Qué estapas de lead necesitar tener a la mano"}),e.jsx("p",{className:"text text-gray-600 mb-8",children:"Configura las etapas del embudo de conversión"}),e.jsxs("form",{className:"flex flex-wrap gap-2 mb-2",onSubmit:o,children:[structuredClone(be).map(t=>{var d;const r=(d=s.statuses)==null?void 0:d.includes(t);return e.jsxs("div",{className:`group border-2 ${r?"border-[#4621E1] bg-[#4621E1] bg-opacity-5":"border-[#BEC5FF]"} ps-3 py-1 pe-4 rounded-xl flex gap-1 items-center justify-center cursor-pointer transition-colors`,onClick:()=>{var m;const a=r?(m=s.statuses)==null?void 0:m.filter(l=>l!==t):[...s.statuses??[],t];n({...s,statuses:a})},children:[r?e.jsx("i",{className:"mdi text-xl flex items-center justify-center mdi-checkbox-marked-outline text-[#4621E1] transition-all"}):e.jsx("i",{className:"mdi text-xl flex items-center justify-center mdi-checkbox-blank-outline text-[#BEC5FF] transition-all"}),e.jsx("span",{children:t})]},t)}),e.jsx("div",{className:"w-full mt-2 overflow-x-auto",children:e.jsx("div",{className:"flex gap-4",children:(i=s.statuses)==null?void 0:i.map((t,r)=>e.jsxs("div",{className:"flex-1 min-w-[150px]",children:[e.jsx("div",{className:"text-sm font-medium text-gray-600 mb-3",children:t}),e.jsx("div",{className:"space-y-2",children:[1,2].map(d=>e.jsxs("div",{className:"bg-gray-200 h-16 rounded-lg animate-pulse p-2",children:[e.jsx("div",{className:"h-4 w-3/4 bg-gray-300 rounded mb-2"}),e.jsx("div",{className:"h-3 w-1/2 bg-gray-300 rounded"})]},d))})]},r))})}),e.jsxs("blockquote",{className:"bg-[#EBEFFF] p-4 rounded-lg mt-6 w-full",children:[e.jsxs("div",{className:"font-bold mb-2",children:[e.jsx("i",{className:"mdi mdi-lightbulb me-2"}),"Tip"]}),e.jsx("p",{className:"text-sm leading-tight",children:'Encontrarás todo tu contenido en los "tableros de Atalaya"'})]}),e.jsx("div",{className:"flex w-full justify-end !mt-6",children:e.jsx("button",{type:"submit",className:"bg-[#4621E1] hover:bg-opacity-90 transition-colors text-white rounded-xl py-3 px-6",children:"Finalizar configuración"})})]})]})},je=()=>e.jsxs("div",{className:"bg-white rounded-xl max-w-sm w-full mx-auto p-6 text-center",children:[e.jsx("i",{className:"mdi mdi-check mdi-36px w-14 h-14 bg-[#DBE0FF] mx-auto mb-6 rounded-2xl flex items-center justify-center text-[#4621E1]"}),e.jsxs("h2",{className:"text-4xl font-bold mb-4",children:["¡Bienvenido a ",e.jsx("span",{className:"text-[#FE4611]",children:"Atalaya"}),"!"]}),e.jsx("p",{className:"leading-tight mb-6 text-gray-600",children:"Tu cuenta ha sido configurada exitosamente. Estás listo para comenzar a gestionar tus clientes y hacer crecer tu negocio."}),e.jsxs("div",{className:"space-y-2 mb-6",children:[e.jsx("button",{className:"w-full block border-2 border-[#4621E1] bg-[#4621E1] hover:bg-opacity-90 transition-colors font-semibold text-white rounded-xl py-3 px-6",children:"Ir al Dashboard"}),e.jsx("button",{className:"w-full block border-2 border-[#4621E1] transition-colors text-[#4621E1] hover:bg-[#4621E1] hover:text-white font-semibold rounded-xl py-3 px-6",children:"Ver tutorial"})]}),e.jsxs("p",{className:"leading-tight text-[#4621E1] text-sm",children:[e.jsx("span",{className:"font-bold",children:"💡 Próximos pasos:"})," Importa tus contactos existentes o comienza agregando tu primer lead."]})]}),ve=new I,Ne=({jsEncrypt:s,services:n,setService:x})=>{const[o,i]=h.useState(null),[t,r]=h.useState(null),[d,a]=h.useState(!1),[m,l]=h.useState(!1),c=async p=>{p.preventDefault(),l(!0);const{status:E,message:N,data:b}=await ve.login({email:s.encrypt(o),password:s.encrypt(t)});if(!E){O(N,{icon:e.jsx("i",{className:"mdi mdi-alert text-[#FE4611]"})}),l(!1);return}b=="main"?location.href="/home":b?location.href=`//${b}.${V.APP_DOMAIN}/home`:(w.fire({icon:"info",title:"Cuenta sin asignar",text:"Aún no te han asignado a una empresa. Por favor, espera que te asignen a una.",confirmButtonColor:"#4621E1"}),l(!1))};return e.jsxs(e.Fragment,{children:[e.jsx(L,{}),e.jsx("div",{className:"h-full grid items-center",children:e.jsxs("div",{className:"bg-white block rounded-xl max-w-sm w-full mx-auto p-6 shadow-lg",children:[e.jsx("i",{className:"mdi mdi-account mdi-36px w-14 h-14 bg-[#DBE0FF] mx-auto mb-6 rounded-2xl flex items-center justify-center text-[#4621E1]"}),e.jsxs("h2",{className:"text-3xl font-bold mb-2 text-center w-full",children:["Bienvenido a Atala",e.jsx("span",{className:"text-[#FE4611]",children:"y"}),"a"]}),e.jsx("p",{className:"text-gray-600 text-center mb-6",children:"Tu plataforma de gestión integral"}),e.jsxs("form",{className:"space-y-4 mb-6",onSubmit:c,children:[e.jsx(g,{label:"Correo Electrónico",icon:"mdi mdi-email",placeholder:"correo@ejemplo.com",value:o,onChange:p=>i(p.target.value),disabled:m,required:!0}),e.jsx(g,{label:"Contraseña",icon:"mdi mdi-lock",placeholder:"••••••••",type:"password",value:t,onChange:p=>r(p.target.value),disabled:m,required:!0}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",className:"text-sm text-gray-600 hover:text-[#4621E1]",children:"¿Olvidaste tu contraseña?"})}),e.jsx("button",{type:"submit",className:"w-full block border-2 border-[#4621E1] bg-[#4621E1] hover:bg-opacity-90 transition-colors font-semibold text-white rounded-xl py-2 px-6",disabled:m,children:m?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"mdi mdi-loading mdi-spin"})," Verificando"]}):"Iniciar Sesión"})]}),e.jsx("div",{className:"text-center space-y-4",children:e.jsx("button",{className:"text-[#4621E1] hover:underline text-sm",onClick:()=>a(!0),children:"¿No tienes una cuenta? Regístrate"})})]})}),e.jsx(te,{modalOpen:d,onRequestClose:()=>a(!1),services:n,onServiceClicked:p=>x(p)})]})},ye=({PUBLIC_RSA_KEY:s,prefixes:n,correlative:x,services:o,service:i,authView:t})=>{const r=new se;r.setPublicKey(s);const[d,a]=h.useState(i),[m,l]=h.useState(t),[c,p]=h.useState(A.Session.get("join-data")??{documentType:"DNI",phonePrefix:"51"}),E=()=>{switch(m){case"login":return e.jsx(Ne,{setStep:l,jsEncrypt:r,services:o,correlative:x,setService:a});case"account":return e.jsx($,{data:c,setData:p,setStep:l,jsEncrypt:r,setService:a});case"business":return e.jsx(le,{data:c,setData:p,setStep:l,jsEncrypt:r,prefixes:n});case"usage":return e.jsx(ce,{data:c,setData:p,setStep:l});case"survey":return e.jsx(me,{data:c,setData:p,setStep:l});case"invite-team":return e.jsx(ue,{data:c,setData:p,setStep:l});case"dashboard":return e.jsx(xe,{data:c,setData:p,setStep:l});case"columns":return e.jsx(pe,{data:c,setData:p,setStep:l});case"manage":return e.jsx(ge,{data:c,setData:p,setStep:l});case"statuses":return e.jsx(fe,{data:c,setData:p,setStep:l});case"thanks":return e.jsx(je,{data:c,setData:p,setStep:l});default:return e.jsx($,{data:c,setData:p,setStep:l,jsEncrypt:r})}};return h.useEffect(()=>{A.Session.set("join-data",c)},[c]),h.useEffect(()=>{const N=window.location.pathname,b=d==null?void 0:d.correlative;if(d){N!==`/join/${b}`&&history.pushState({},"",`/join/${b}`);const f=o.some(j=>j.correlative===b);l(f?"account":"login")}else N!=="/join"&&history.pushState({},"","/join"),l("login")},[d]),h.useEffect(()=>{const N=()=>{const f=window.location.pathname,j=f.match(/\/join\/(.+)/),y=o.find(k=>k.correlative===(j==null?void 0:j[1]));f!="/join"&&y?a(y):a(null)},b=()=>{const f=window.location.pathname;if(f=="/join")a(null);else{const j=f.match(/\/join\/(.+)/);if(j){const y=o.find(k=>k.correlative===j[1]);y&&a(y)}}};return window.addEventListener("popstate",N),window.addEventListener("locationchange",b),()=>{window.removeEventListener("popstate",N),window.removeEventListener("locationchange",b)}},[]),h.useEffect(()=>{d?document.title=`Join ${d.name} | Atalaya`:document.title="Join | Atalaya"},[null]),e.jsx(ne,{step:m,setStep:l,children:E()})};U((s,n)=>{J(s).render(e.jsx(ye,{...n}))});
