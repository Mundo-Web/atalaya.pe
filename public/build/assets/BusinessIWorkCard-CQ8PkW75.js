var c=Object.defineProperty;var d=(i,s,t)=>s in i?c(i,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[s]=t;var r=(i,s,t)=>d(i,typeof s!="symbol"?s+"":s,t);import"./Accordion-B0xeqd_u.js";import"./index-B80Lgev0.js";import{m as a}from"./main-DtAlmsP1.js";import"./___vite-browser-external_commonjs-proxy-C9-083JZ.js";let n=new AbortController;class m{constructor(){r(this,"path",null);r(this,"hasFiles",!1);r(this,"paginate",async s=>{n.abort("Nothing"),n=new AbortController;const t=n.signal;return await(await fetch(`/api/${this.path}/paginate`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(a.Cookies.get("XSRF-TOKEN"))},body:JSON.stringify(s),signal:t})).json()});r(this,"save",async s=>{try{let t=!1,e={};if(this.hasFiles){const o=await fetch(`/api/${this.path}`,{method:"POST",headers:{"X-Xsrf-Token":decodeURIComponent(a.Cookies.get("XSRF-TOKEN"))},body:s});t=o.ok,e=JSON.parseable(await o.text())}else{const o=await a.Fetch(`/api/${this.path}`,{method:"POST",body:JSON.stringify(s)});t=o.status,e=o.result}if(!t)throw new Error((e==null?void 0:e.message)||"Ocurrio un error inesperado");return a.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:e.message,type:"success"}),e.data||!0}catch(t){return a.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:t.message,type:"danger"}),null}});r(this,"status",async({id:s,status:t})=>{try{const{status:e,result:o}=await a.Fetch(`/api/${this.path}/status`,{method:"PATCH",body:JSON.stringify({id:s,status:t})});if(!e)throw new Error((o==null?void 0:o.message)??"Ocurrio un error inesperado");return a.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:o.message,type:"success"}),(o==null?void 0:o.data)??!0}catch(e){return a.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:e.message,type:"danger"}),!1}});r(this,"delete",async s=>{try{const{status:t,result:e}=await a.Fetch(`/api/${this.path}/${s}`,{method:"DELETE"});if(!t)throw new Error((e==null?void 0:e.message)??"Ocurrio un error inesperado");return a.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:e.message,type:"success"}),!0}catch(t){return a.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:t.message,type:"danger"}),!1}})}}export{m as B};
