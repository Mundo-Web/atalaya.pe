import{g as ce,r as d,j as r,C as ye,c as xe}from"./CreateReactScript-CWcA9V8L.js";import{J as ge}from"./JSEncrypt-D3I3x59l.js";import{A as be}from"./AuthRest-CjcqXQh4.js";import{S as ve}from"./SelectFormGroup-DV0pgn2E.js";import{M as je}from"./Modal-WX1lv3wM.js";import{S as oe}from"./sweetalert2.esm.all-B0Dix5B2.js";var le={exports:{}},Re="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Se=Re,Ne=Se;function de(){}function pe(){}pe.resetWarningCache=de;var _e=function(){function e(o,t,c,m,v,u){if(u!==Ne){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}e.isRequired=e;function n(){return e}var a={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,elementType:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:pe,resetWarningCache:de};return a.PropTypes=a,a};le.exports=_e();var we=le.exports;const y=ce(we);var Oe=["sitekey","onChange","theme","type","tabindex","onExpired","onErrored","size","stoken","grecaptcha","badge","hl","isolated"];function B(){return B=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},B.apply(this,arguments)}function Ee(e,n){if(e==null)return{};var a={},o=Object.keys(e),t,c;for(c=0;c<o.length;c++)t=o[c],!(n.indexOf(t)>=0)&&(a[t]=e[t]);return a}function I(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Te(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,K(e,n)}function K(e,n){return K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,t){return o.__proto__=t,o},K(e,n)}var F=function(e){Te(n,e);function n(){var o;return o=e.call(this)||this,o.handleExpired=o.handleExpired.bind(I(o)),o.handleErrored=o.handleErrored.bind(I(o)),o.handleChange=o.handleChange.bind(I(o)),o.handleRecaptchaRef=o.handleRecaptchaRef.bind(I(o)),o}var a=n.prototype;return a.getCaptchaFunction=function(t){return this.props.grecaptcha?this.props.grecaptcha.enterprise?this.props.grecaptcha.enterprise[t]:this.props.grecaptcha[t]:null},a.getValue=function(){var t=this.getCaptchaFunction("getResponse");return t&&this._widgetId!==void 0?t(this._widgetId):null},a.getWidgetId=function(){return this.props.grecaptcha&&this._widgetId!==void 0?this._widgetId:null},a.execute=function(){var t=this.getCaptchaFunction("execute");if(t&&this._widgetId!==void 0)return t(this._widgetId);this._executeRequested=!0},a.executeAsync=function(){var t=this;return new Promise(function(c,m){t.executionResolve=c,t.executionReject=m,t.execute()})},a.reset=function(){var t=this.getCaptchaFunction("reset");t&&this._widgetId!==void 0&&t(this._widgetId)},a.forceReset=function(){var t=this.getCaptchaFunction("reset");t&&t()},a.handleExpired=function(){this.props.onExpired?this.props.onExpired():this.handleChange(null)},a.handleErrored=function(){this.props.onErrored&&this.props.onErrored(),this.executionReject&&(this.executionReject(),delete this.executionResolve,delete this.executionReject)},a.handleChange=function(t){this.props.onChange&&this.props.onChange(t),this.executionResolve&&(this.executionResolve(t),delete this.executionReject,delete this.executionResolve)},a.explicitRender=function(){var t=this.getCaptchaFunction("render");if(t&&this._widgetId===void 0){var c=document.createElement("div");this._widgetId=t(c,{sitekey:this.props.sitekey,callback:this.handleChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,"error-callback":this.handleErrored,size:this.props.size,stoken:this.props.stoken,hl:this.props.hl,badge:this.props.badge,isolated:this.props.isolated}),this.captcha.appendChild(c)}this._executeRequested&&this.props.grecaptcha&&this._widgetId!==void 0&&(this._executeRequested=!1,this.execute())},a.componentDidMount=function(){this.explicitRender()},a.componentDidUpdate=function(){this.explicitRender()},a.handleRecaptchaRef=function(t){this.captcha=t},a.render=function(){var t=this.props;t.sitekey,t.onChange,t.theme,t.type,t.tabindex,t.onExpired,t.onErrored,t.size,t.stoken,t.grecaptcha,t.badge,t.hl,t.isolated;var c=Ee(t,Oe);return d.createElement("div",B({},c,{ref:this.handleRecaptchaRef}))},n}(d.Component);F.displayName="ReCAPTCHA";F.propTypes={sitekey:y.string.isRequired,onChange:y.func,grecaptcha:y.object,theme:y.oneOf(["dark","light"]),type:y.oneOf(["image","audio"]),tabindex:y.number,onExpired:y.func,onErrored:y.func,size:y.oneOf(["compact","normal","invisible"]),stoken:y.string,hl:y.string,badge:y.oneOf(["bottomright","bottomleft","inline"]),isolated:y.bool};F.defaultProps={onChange:function(){},theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};var ue={exports:{}},i={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p=typeof Symbol=="function"&&Symbol.for,X=p?Symbol.for("react.element"):60103,Z=p?Symbol.for("react.portal"):60106,A=p?Symbol.for("react.fragment"):60107,k=p?Symbol.for("react.strict_mode"):60108,D=p?Symbol.for("react.profiler"):60114,M=p?Symbol.for("react.provider"):60109,U=p?Symbol.for("react.context"):60110,ee=p?Symbol.for("react.async_mode"):60111,q=p?Symbol.for("react.concurrent_mode"):60111,W=p?Symbol.for("react.forward_ref"):60112,z=p?Symbol.for("react.suspense"):60113,Le=p?Symbol.for("react.suspense_list"):60120,H=p?Symbol.for("react.memo"):60115,V=p?Symbol.for("react.lazy"):60116,Pe=p?Symbol.for("react.block"):60121,Ce=p?Symbol.for("react.fundamental"):60117,Ie=p?Symbol.for("react.responder"):60118,$e=p?Symbol.for("react.scope"):60119;function b(e){if(typeof e=="object"&&e!==null){var n=e.$$typeof;switch(n){case X:switch(e=e.type,e){case ee:case q:case A:case D:case k:case z:return e;default:switch(e=e&&e.$$typeof,e){case U:case W:case V:case H:case M:return e;default:return n}}case Z:return n}}}function fe(e){return b(e)===q}i.AsyncMode=ee;i.ConcurrentMode=q;i.ContextConsumer=U;i.ContextProvider=M;i.Element=X;i.ForwardRef=W;i.Fragment=A;i.Lazy=V;i.Memo=H;i.Portal=Z;i.Profiler=D;i.StrictMode=k;i.Suspense=z;i.isAsyncMode=function(e){return fe(e)||b(e)===ee};i.isConcurrentMode=fe;i.isContextConsumer=function(e){return b(e)===U};i.isContextProvider=function(e){return b(e)===M};i.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===X};i.isForwardRef=function(e){return b(e)===W};i.isFragment=function(e){return b(e)===A};i.isLazy=function(e){return b(e)===V};i.isMemo=function(e){return b(e)===H};i.isPortal=function(e){return b(e)===Z};i.isProfiler=function(e){return b(e)===D};i.isStrictMode=function(e){return b(e)===k};i.isSuspense=function(e){return b(e)===z};i.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===A||e===q||e===D||e===k||e===z||e===Le||typeof e=="object"&&e!==null&&(e.$$typeof===V||e.$$typeof===H||e.$$typeof===M||e.$$typeof===U||e.$$typeof===W||e.$$typeof===Ce||e.$$typeof===Ie||e.$$typeof===$e||e.$$typeof===Pe)};i.typeOf=b;ue.exports=i;var Fe=ue.exports,te=Fe,Ae={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},ke={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},De={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},me={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},re={};re[te.ForwardRef]=De;re[te.Memo]=me;function ae(e){return te.isMemo(e)?me:re[e.$$typeof]||Ae}var Me=Object.defineProperty,Ue=Object.getOwnPropertyNames,se=Object.getOwnPropertySymbols,qe=Object.getOwnPropertyDescriptor,We=Object.getPrototypeOf,ie=Object.prototype;function he(e,n,a){if(typeof n!="string"){if(ie){var o=We(n);o&&o!==ie&&he(e,o,a)}var t=Ue(n);se&&(t=t.concat(se(n)));for(var c=ae(e),m=ae(n),v=0;v<t.length;++v){var u=t[v];if(!ke[u]&&!(a&&a[u])&&!(m&&m[u])&&!(c&&c[u])){var x=qe(n,u);try{Me(e,u,x)}catch{}}}}return e}var ze=he;const He=ce(ze);function Y(){return Y=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},Y.apply(this,arguments)}function Ve(e,n){if(e==null)return{};var a={},o=Object.keys(e),t,c;for(c=0;c<o.length;c++)t=o[c],!(n.indexOf(t)>=0)&&(a[t]=e[t]);return a}function Ge(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n}var R={},Be=0;function Ke(e,n){return n=n||{},function(o){var t=o.displayName||o.name||"Component",c=function(v){Ge(u,v);function u(j,l){var s;return s=v.call(this,j,l)||this,s.state={},s.__scriptURL="",s}var x=u.prototype;return x.asyncScriptLoaderGetScriptLoaderID=function(){return this.__scriptLoaderID||(this.__scriptLoaderID="async-script-loader-"+Be++),this.__scriptLoaderID},x.setupScriptURL=function(){return this.__scriptURL=typeof e=="function"?e():e,this.__scriptURL},x.asyncScriptLoaderHandleLoad=function(l){var s=this;this.setState(l,function(){return s.props.asyncScriptOnLoad&&s.props.asyncScriptOnLoad(s.state)})},x.asyncScriptLoaderTriggerOnScriptLoaded=function(){var l=R[this.__scriptURL];if(!l||!l.loaded)throw new Error("Script is not loaded.");for(var s in l.observers)l.observers[s](l);delete window[n.callbackName]},x.componentDidMount=function(){var l=this,s=this.setupScriptURL(),h=this.asyncScriptLoaderGetScriptLoaderID(),g=n,E=g.globalName,O=g.callbackName,T=g.scriptId;if(E&&typeof window[E]<"u"&&(R[s]={loaded:!0,observers:{}}),R[s]){var N=R[s];if(N&&(N.loaded||N.errored)){this.asyncScriptLoaderHandleLoad(N);return}N.observers[h]=function(f){return l.asyncScriptLoaderHandleLoad(f)};return}var L={};L[h]=function(f){return l.asyncScriptLoaderHandleLoad(f)},R[s]={loaded:!1,observers:L};var S=document.createElement("script");S.src=s,S.async=!0;for(var C in n.attributes)S.setAttribute(C,n.attributes[C]);T&&(S.id=T);var P=function(_){if(R[s]){var G=R[s],w=G.observers;for(var ne in w)_(w[ne])&&delete w[ne]}};O&&typeof window<"u"&&(window[O]=function(){return l.asyncScriptLoaderTriggerOnScriptLoaded()}),S.onload=function(){var f=R[s];f&&(f.loaded=!0,P(function(_){return O?!1:(_(f),!0)}))},S.onerror=function(){var f=R[s];f&&(f.errored=!0,P(function(_){return _(f),!0}))},document.body.appendChild(S)},x.componentWillUnmount=function(){var l=this.__scriptURL;if(n.removeOnUnmount===!0)for(var s=document.getElementsByTagName("script"),h=0;h<s.length;h+=1)s[h].src.indexOf(l)>-1&&s[h].parentNode&&s[h].parentNode.removeChild(s[h]);var g=R[l];g&&(delete g.observers[this.asyncScriptLoaderGetScriptLoaderID()],n.removeOnUnmount===!0&&delete R[l])},x.render=function(){var l=n.globalName,s=this.props;s.asyncScriptOnLoad;var h=s.forwardedRef,g=Ve(s,["asyncScriptOnLoad","forwardedRef"]);return l&&typeof window<"u"&&(g[l]=typeof window[l]<"u"?window[l]:void 0),g.ref=h,d.createElement(o,g)},u}(d.Component),m=d.forwardRef(function(v,u){return d.createElement(c,Y({},v,{forwardedRef:u}))});return m.displayName="AsyncScriptLoader("+t+")",m.propTypes={asyncScriptOnLoad:y.func},He(m,o)}}var J="onloadcallback",Ye="grecaptcha";function Q(){return typeof window<"u"&&window.recaptchaOptions||{}}function Je(){var e=Q(),n=e.useRecaptchaNet?"recaptcha.net":"www.google.com";return e.enterprise?"https://"+n+"/recaptcha/enterprise.js?onload="+J+"&render=explicit":"https://"+n+"/recaptcha/api.js?onload="+J+"&render=explicit"}const Qe=Ke(Je,{callbackName:J,globalName:Ye,attributes:Q().nonce?{nonce:Q().nonce}:{}})(F),Xe=({html:e})=>r.jsx("div",{dangerouslySetInnerHTML:{__html:e}}),Ze=({PUBLIC_RSA_KEY:e,RECAPTCHA_SITE_KEY:n,token:a,terms:o="Terminos y condiciones"})=>{document.title="Registro | Atalaya";const t=new ge;t.setPublicKey(e);const[c,m]=d.useState(!0),[v,u]=d.useState(null),[x,j]=d.useState(!1),l=d.useRef(),s=d.useRef(),h=d.useRef(),g=d.useRef(),E=d.useRef(),O=d.useRef(),T=d.useRef(),N=d.useRef(),L=d.useRef();d.useEffect(()=>{m(!1)},[null]);const S=async P=>{P.preventDefault(),m(!0);const f=O.current.value,_=T.current.value;if(f!=_)return oe.fire({icon:"warning",title:"Error",text:"Las contraseñas no coinciden",confirmButtonText:"Ok"});if(!v)return oe.fire({icon:"warning",title:"Error",text:"Por favor, complete el captcha",confirmButtonText:"Ok"});const G={document_type:$(l.current).val(),document_number:s.current.value,name:h.current.value,lastname:g.current.value,email:E.current.value,password:t.encrypt(f),confirmation:t.encrypt(_),terms:N.current.checked,captcha:v,_token:a},w=await be.signup(G);if(!w)return m(!1);w&&(location.href=`./confirm-email/${w}`),m(!1)},C=P=>{s.current.value="",j(!1)};return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"account-pages mt-5 mb-5",children:r.jsx("div",{className:"container",children:r.jsx("div",{className:"row justify-content-center align-items-center",style:{minHeight:"calc(100vh - 150px)"},children:r.jsxs("div",{className:"col-md-8 col-lg-6 col-xl-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("a",{href:"/",children:r.jsx("img",{src:"/assets/img/logo-dark.svg",alt:"",height:"22",className:"mx-auto",style:{height:"22px"}})}),r.jsx("p",{className:"text-muted mt-2 mb-4",children:"Atalaya by Mundo Web"})]}),r.jsx("div",{className:"card",children:r.jsxs("div",{className:"card-body p-4",children:[r.jsx("div",{className:"text-center mb-4",children:r.jsx("h4",{className:"text-uppercase mt-0 font-bold",children:"Registrate"})}),r.jsxs("form",{onSubmit:S,className:"row",children:[r.jsxs("div",{className:"col-sm-6 mb-2",children:[r.jsxs("label",{htmlFor:"document_type",className:"form-label",children:["Tipo documento ",r.jsx("b",{className:"text-danger",children:"*"})]}),r.jsxs(ve,{eRef:l,onChange:C,required:!0,children:[r.jsx("option",{value:"DNI",children:"DNI - Documento Nacional de Identidad"}),r.jsx("option",{value:"CE",children:"CE - Carnet de Extranjeria"})]})]}),r.jsxs("div",{className:"col-sm-6 mb-2",children:[r.jsxs("label",{htmlFor:"document_number",className:"form-label",children:["Numero documento ",r.jsx("b",{className:"text-danger",children:"*"})]}),r.jsx("input",{ref:s,className:"form-control",type:"text",id:"document_number",placeholder:"Ingrese su documento",required:!0})]}),r.jsxs("div",{className:"col-sm-6 mb-2",children:[r.jsxs("label",{htmlFor:"name",className:"form-label",children:["Nombres ",r.jsx("b",{className:"text-danger",children:"*"})]}),r.jsx("input",{ref:h,className:"form-control",type:"text",id:"name",placeholder:"Ingrese su nombre",required:!0})]}),r.jsxs("div",{className:"col-sm-6 mb-2",children:[r.jsxs("label",{htmlFor:"lastname",className:"form-label",children:["Apellidos ",r.jsx("b",{className:"text-danger",children:"*"})]}),r.jsx("input",{ref:g,className:"form-control",type:"text",id:"lastname",placeholder:"Ingrese sus apellidos",required:!0})]}),r.jsxs("div",{className:"col-12 mb-2",children:[r.jsxs("label",{htmlFor:"email",className:"form-label",children:["Correo electronico ",r.jsx("b",{className:"text-danger",children:"*"})]}),r.jsx("input",{ref:E,className:"form-control",type:"email",id:"email",required:!0,placeholder:"Ingrese su correo electronico"})]}),r.jsxs("div",{className:"col-sm-6 mb-2",children:[r.jsxs("label",{htmlFor:"password",className:"form-label",children:["Contraseña ",r.jsx("b",{className:"text-danger",children:"*"})]}),r.jsx("input",{ref:O,className:"form-control",type:"password",required:!0,id:"password",placeholder:"Ingrese su contraseña"})]}),r.jsxs("div",{className:"col-sm-6 mb-3",children:[r.jsxs("label",{htmlFor:"confirmation",className:"form-label",children:["Confirmacion ",r.jsx("b",{className:"text-danger",children:"*"})]}),r.jsx("input",{ref:T,className:"form-control",type:"password",required:!0,id:"confirmation",placeholder:"Confirme su contraseña"})]}),r.jsx("div",{className:"col-12 mb-3",children:r.jsxs("div",{className:"form-check mx-auto",style:{width:"max-content"},children:[r.jsx("input",{ref:N,type:"checkbox",className:"form-check-input",id:"checkbox-signup",required:!0}),r.jsxs("label",{className:"form-check-label",htmlFor:"checkbox-signup",children:["Acepto los",r.jsx("a",{href:"#terms",className:"ms-1 text-blue",onClick:()=>$(L.current).modal("show"),children:"terminos y condiciones"})]})]})}),r.jsx(Qe,{className:"m-auto mb-3",sitekey:n,onChange:u,style:{display:"block",width:"max-content"}}),r.jsx("div",{className:"mb-0 text-center d-grid",children:r.jsx("button",{className:"btn btn-primary",type:"submit",disabled:c,children:c?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fa fa-spinner fa-spin"})," Verificando"]}):"Registrarme"})})]})]})}),r.jsx("div",{className:"row mt-3",children:r.jsx("div",{className:"col-12 text-center",children:r.jsxs("p",{className:"text-muted",children:["Ya tienes una cuenta? ",r.jsx("a",{href:"/login",className:"text-dark ms-1",children:r.jsx("b",{children:"Iniciar sesion"})})]})})})]})})})}),r.jsx(je,{modalRef:L,title:"Terminos y condiciones",size:"lg",hideFooter:!0,children:r.jsx(Xe,{html:o})})]})};ye((e,n)=>{xe(e).render(r.jsx(Ze,{...n}))});
