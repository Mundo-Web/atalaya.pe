import{j as e}from"./Accordion-B0xeqd_u.js";import{c as j}from"./ReactAppend-Da6mr3zD.js";import{r as a}from"./index-B80Lgev0.js";import{J as g}from"./JSEncrypt-D3I3x59l.js";import{C as N}from"./CreateReactScript-BGmXE1Hn.js";import{A as y}from"./AuthRest-CzS3X5Ou.js";import"./index.esm-X2U-7gJn.js";import{S as v}from"./SurveyStep-C1GxQ1hd.js";import{m as s}from"./main-DtAlmsP1.js";import"./index-STwnHZb6.js";import"./___vite-browser-external_commonjs-proxy-C9-083JZ.js";const w=({PUBLIC_RSA_KEY:t,token:l,APP_DOMAIN:m,APP_PROTOCOL:d})=>{document.title="Login | Atalaya";const i=new g;i.setPublicKey(t);const[r,c]=a.useState(!1),o=a.useRef(),n=a.useRef(),h=a.useRef();a.useEffect(()=>{s.GET.message&&v.fire({icon:"info",title:"Mensaje",text:s.GET.message,showConfirmButton:!1,timer:3e3}),s.GET.service?history.pushState(null,null,`/login?service=${s.GET.service}`):history.pushState(null,null,"/login")},[null]);const u=async p=>{p.preventDefault(),c(!0);const x=o.current.value,f=n.current.value,b={email:i.encrypt(x),password:i.encrypt(f),_token:l};if(!await y.login(b))return c(!1);s.GET.service?location.href=`${d}://${s.GET.service}.${m}/home`:location.href="./home"};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"account-pages my-5",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row justify-content-center align-items-center",style:{minHeight:"calc(100vh - 150px)"},children:e.jsxs("div",{className:"col-xl-3 col-lg-4 col-md-6 col-sm-8 col-xs-12",children:[e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-muted mt-2 mb-3",children:"Atalaya by Mundo Web"})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header border-bottom bg-white",children:e.jsx("a",{href:"/",className:"my-1 d-block",children:e.jsx("img",{src:"/assets/img/logo-dark.svg",alt:"Atalaya",className:"mx-auto",style:{height:"35px"}})})}),e.jsxs("div",{className:"card-body p-3",children:[e.jsxs("div",{className:"text-center mb-3",children:[e.jsx("h4",{className:"header-title mt-0 font-bold mb-1",children:"Hola, listo para generar!"}),e.jsx("small",{className:"text-muted mb-4",children:"Ingresa tus datos para iniciar sesi칩n."})]}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"email",className:"form-label mb-1",children:["Correo o Usuario",e.jsx("span",{className:"ms-1",style:{color:"#ff6c37"},children:"*"})]}),e.jsx("input",{ref:o,className:"form-control",type:"email",id:"email",required:!0,placeholder:"Ingrese su correo o usuario",disabled:r})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"password",className:"form-label mb-1",children:["Contrase침a",e.jsx("span",{className:"ms-1",style:{color:"#ff6c37"},children:"*"})]}),e.jsx("input",{ref:n,className:"form-control",type:"password",required:!0,id:"password",placeholder:"Ingrese su contrase침a",disabled:r})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"form-check",children:[e.jsx("input",{ref:h,type:"checkbox",className:"form-check-input",id:"checkbox-signin",defaultChecked:!0,style:{cursor:"pointer"}}),e.jsx("label",{className:"form-check-label",htmlFor:"checkbox-signin",style:{cursor:"pointer"},children:"Recuerdame"})]})}),e.jsxs("div",{className:"d-grid gap-1 text-center",children:[e.jsx("button",{className:"btn btn-primary",type:"submit",disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"mdi mdi-spin mdi-loading me-1"}),"Verificando"]}):e.jsx(e.Fragment,{children:"Iniciar Sesi칩n"})}),e.jsx("button",{className:"btn btn-outline-primary",type:"submit",disabled:r,onClick:()=>location.href="/register",children:"Crear cuenta"})]})]})]})]})]})})})})})};N((t,l)=>{j(t).render(e.jsx(w,{...l}))});
