var c=Object.defineProperty;var d=(i,r,e)=>r in i?c(i,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[r]=e;var a=(i,r,e)=>d(i,typeof r!="symbol"?r+"":r,e);import"./Accordion-B0xeqd_u.js";import"./index-B80Lgev0.js";import{m as o}from"./main-DtAlmsP1.js";import{t as p}from"./index-BK7CmI7H.js";import"./___vite-browser-external_commonjs-proxy-C9-083JZ.js";import"./index-STwnHZb6.js";let n=new AbortController;class w{constructor(){a(this,"path",null);a(this,"hasFiles",!1);a(this,"simpleGet",async(r,e)=>{try{const{status:t,result:s}=await o.Fetch(r,e);if(!t)throw new Error((s==null?void 0:s.message)||"Ocurrio un error inesperado");return s.data??!0}catch(t){return p.error("Â¡Error!",{description:t.message,duration:3e3,position:"bottom-right",richColors:!0}),null}});a(this,"paginate",async r=>{n.abort("Nothing"),n=new AbortController;const e=n.signal;return await(await fetch(`/api/${this.path}/paginate`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(o.Cookies.get("XSRF-TOKEN"))},body:JSON.stringify(r),signal:e})).json()});a(this,"save",async r=>{try{let e=!1,t={};if(this.hasFiles){const s=await fetch(`/api/${this.path}`,{method:"POST",headers:{"X-Xsrf-Token":decodeURIComponent(o.Cookies.get("XSRF-TOKEN"))},body:r});e=s.ok,t=JSON.parseable(await s.text())}else{const s=await o.Fetch(`/api/${this.path}`,{method:"POST",body:JSON.stringify(r)});e=s.status,t=s.result}if(!e)throw new Error((t==null?void 0:t.message)||"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:t.message,type:"success"}),t.data||!0}catch(e){return o.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:e.message,type:"danger"}),null}});a(this,"status",async({id:r,status:e})=>{try{const{status:t,result:s}=await o.Fetch(`/api/${this.path}/status`,{method:"PATCH",body:JSON.stringify({id:r,status:e})});if(!t)throw new Error((s==null?void 0:s.message)??"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:s.message,type:"success"}),(s==null?void 0:s.data)??!0}catch(t){return o.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:t.message,type:"danger"}),!1}});a(this,"delete",async r=>{try{const{status:e,result:t}=await o.Fetch(`/api/${this.path}/${r}`,{method:"DELETE"});if(!e)throw new Error((t==null?void 0:t.message)??"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:t.message,type:"success"}),!0}catch(e){return o.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:e.message,type:"danger"}),!1}})}}export{w as B};
