import{c as z}from"./ReactAppend-Da6mr3zD.js";import{j as a}from"./Accordion-B0xeqd_u.js";import{r as B}from"./index-B80Lgev0.js";const O=({gridRef:e,rest:l,columns:i,toolBar:c,masterDetail:u,filterValue:p,defaultRows:s,selection:m,allowedPageSizes:x=[5,10,25,50,100],pageSize:f=100,exportable:h,exportableName:g,customizeCell:v=()=>{},reloadWith:b=[null],height:w="calc(100vh - 185px)"})=>(B.useEffect(()=>{var y,E,D;DevExpress.localization.locale(navigator.language),$(e.current).data("dxDataGrid")&&((E=(y=$(e.current))==null?void 0:y.dxDataGrid("instance"))==null||E.dispose()),$(e.current).dxDataGrid({language:"es",dataSource:{load:async r=>{const t=await l.paginate(r)??{};let o=(t==null?void 0:t.data)||[];if(s){const n=s.map(j=>Object.keys(j)),S=o.concat(s.filter(j=>!o.some(C=>n.some(k=>k.every(N=>C[N]==j[N])))));t.data=S}return t}},onToolbarPreparing:r=>{const{items:t}=r.toolbarOptions;c(t)},hoverStateEnabled:!0,remoteOperations:!0,columnResizingMode:"widget",allowColumnResizing:!0,allowColumnReordering:!0,columnAutoWidth:!0,scrollbars:"auto",filterPanel:{visible:!0},searchPanel:{visible:!0},headerFilter:{visible:!0,search:{enabled:!0}},height:w,filterValue:p,selection:m||null,export:{enabled:h},onExporting:function(r){var t=new ExcelJS.Workbook,o=t.addWorksheet("Main sheet");DevExpress.excelExporter.exportDataGrid({worksheet:o,component:r.component,customizeCell:function(n){v(n),n.excelCell.alignment={horizontal:"left",vertical:"top",...n.excelCell.alignment}}}).then(function(){t.xlsx.writeBuffer().then(function(n){saveAs(new Blob([n],{type:"application/octet-stream"}),`${g}.xlsx`)})})},rowAlternationEnabled:!0,showBorders:!0,filterRow:{visible:!0,applyFilter:"auto"},filterBuilderPopup:{visible:!1,position:{of:window,at:"top",my:"top",offset:{y:10}}},paging:{pageSize:f},pager:{visible:!0,allowedPageSizes:x,showPageSizeSelector:!0,showInfo:!0,showNavigationButtons:!0},allowFiltering:!0,scrolling:{mode:"standard",useNative:!0,preloadEnabled:!0,rowRenderingMode:"standard"},columnChooser:{title:"Mostrar/Ocultar columnas",enabled:!0,mode:"select",search:{enabled:!0}},columns:i,masterDetail:u,onContentReady:(...r)=>{tippy(".tippy-here",{arrow:!0,animation:"scale"})},onOptionChanged:r=>{if(r.fullName==="filterValue"){const t=location.pathname,o=Local.get("dxSettings")||{};o[t]={filterValue:r.value},Local.set("dxSettings",o)}}}).dxDataGrid("instance"),tippy(".dx-button",{arrow:!0});const d=Local.get("dxSettings")||{};(D=d[location.pathname])!=null&&D.filterValue&&$(e.current).dxDataGrid("instance").option("filterValue",d[location.pathname].filterValue)},b),a.jsx("div",{ref:e})),A=(e,l)=>{const i=document.createElement("div");e.append(i),z(i).render(l)},L=({title:e,gridRef:l,rest:i,columns:c,toolBar:u,masterDetail:p,filterValue:s=[],defaultRows:m,selection:x,className:f="",allowedPageSizes:h,pageSize:g,exportable:v=!1,customizeCell:b,reloadWith:w,height:d})=>a.jsx("div",{className:`row ${f}`,children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[typeof e=="object"&&a.jsx("div",{className:"card-header",children:e}),a.jsxs("div",{className:"card-body",children:[typeof e=="string"&&a.jsxs("h4",{className:"header-title",children:[a.jsx("div",{id:"header-title-options",className:"float-end"}),a.jsx("span",{id:"header-title-prefix"})," Lista de ",e," ",a.jsx("span",{id:"header-title-suffix"})]}),a.jsx(O,{gridRef:l,rest:i,columns:c.filter(Boolean),toolBar:u,masterDetail:p,filterValue:s,defaultRows:m,selection:x,allowedPageSizes:h,pageSize:g,exportable:v,exportableName:e,customizeCell:b,reloadWith:w,height:d})]})]})})});export{A as R,L as T};
