var T=Object.defineProperty;var _=(l,a,o)=>a in l?T(l,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[a]=o;var f=(l,a,o)=>_(l,typeof a!="symbol"?a+"":a,o);import{j as e}from"./Accordion-B0xeqd_u.js";import{c as L}from"./ReactAppend-Da6mr3zD.js";import{r as t}from"./index-B80Lgev0.js";import{C as $,G as z}from"./CreateReactScript-wxngZ06p.js";import{D as E,I as i}from"./DropDownContainer-D3XWasLm.js";import{A as B}from"./AuthRest-CzS3X5Ou.js";import{B as G}from"./BusinessIWorkCard-B9yG3aQu.js";import{T as M}from"./LoginStep-DIoBarna.js";import{J}from"./JSEncrypt-D3I3x59l.js";import"./index-STwnHZb6.js";import"./index.esm-X2U-7gJn.js";import"./___vite-browser-external_commonjs-proxy-C9-083JZ.js";import"./main-DtAlmsP1.js";import"./server.browser-bIzDeQez.js";class V extends G{constructor(){super(...arguments);f(this,"path","person");f(this,"search",(o,d)=>this.simpleGet(`/api/${this.path}/search/${o}/${d}`))}}const W=new V,K=({invitation:l,PUBLIC_RSA_KEY:a,prefixes:o=[]})=>{const d=new J;d.setPublicKey(a);const[b,m]=t.useState(""),[j,u]=t.useState(""),[n,P]=t.useState("DNI"),[c,R]=t.useState(""),[N,p]=t.useState("51"),[v,h]=t.useState(""),[w,I]=t.useState(""),[y,F]=t.useState(""),[O,C]=t.useState(!1),[x,g]=t.useState(!1),[r,D]=t.useState(!1),q=async s=>{s.preventDefault();const k={name:b,lastname:j,document_type:n,document_number:c,phone_prefix:N,phone:v,password:d.encrypt(w),confirmation:d.encrypt(y)};D(!0);const S=await B.signup(k);D(!1),S&&(location.href=`//${S}.${z.APP_DOMAIN}/home`)},A=async()=>{C(!0),g(!1);const s=await W.search(n,c);if(C(!1),!s)return g(null);g(!0),m(s.name),u(s.lastname),p(s.phone_prefix||"51"),h(s.phone)};return t.useEffect(()=>{m(""),u(""),p("51"),h(""),(n==="DNI"&&c.length===8||n==="CE"&&c.length===9)&&A()},[n,c]),console.log(x),e.jsxs(e.Fragment,{children:[e.jsx(M,{}),e.jsxs("main",{className:"text-[#000938] bg-no-repeat bg-cover bg-fixed bg-center",style:{},children:[e.jsx("header",{className:"bg-white shadow-lg",children:e.jsx("div",{className:"max-w-7xl w-full mx-auto relative flex items-center justify-center py-4 px-4 sm:px-6 lg:px-8",children:e.jsx("a",{href:"/",className:"transition-transform hover:scale-105",children:e.jsx("img",{src:"/assets/img/logo-dark.svg",alt:"",style:{height:"32px"}})})})}),e.jsxs("section",{className:"relative bg-[#f8f8f8]",children:[e.jsx("img",{className:"absolute top-0 left-0 w-full h-full z-0",src:"/assets/img/background-auth.png"}),e.jsx("div",{className:" mx-auto flex flex-col md:flex-row z-10 items-center justify-center",children:e.jsx("div",{className:"relative h-[calc(100vh-144px)] md:h-[calc(100vh-116px)] overflow-y-auto w-full p-6 md:p-12 z-10  justify-center items-center",children:e.jsxs("div",{className:"bg-white block rounded-xl max-w-lg w-full mx-auto p-6 shadow-lg",children:[e.jsx("i",{className:"mdi mdi-account mdi-36px w-14 h-14 bg-[#DBE0FF] mx-auto mb-6 rounded-2xl flex items-center justify-center text-[#4621E1]"}),e.jsxs("h2",{className:"text-3xl font-bold mb-2 text-center w-full",children:["Registro en Atala",e.jsx("span",{className:"text-[#FE4611]",children:"y"}),"a"]}),e.jsx("p",{className:"text-gray-600 text-center mb-6",children:"Completa tus datos para registrarte"}),e.jsxs("form",{onSubmit:q,children:[e.jsx("h4",{className:"font-bold mb-2",children:"Datos personales"}),e.jsxs("div",{className:"space-y-4 mb-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(E,{label:"Tipo de doc.",icon:"mdi mdi-badge-account-horizontal-outline",value:n,values:["DNI","CE"],onChange:s=>P(s.target.value),required:!0,disabled:r}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(i,{label:"Número de documento",placeholder:"00000000",value:c,onChange:s=>R(s.target.value),required:!0,disabled:r,maxLength:n==="DNI"?8:9,minLength:n==="DNI"?8:9})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(i,{label:"Nombres",icon:"mdi mdi-account",placeholder:"Ingresa tus nombres",value:b,onChange:s=>m(s.target.value),disabled:r||x!==null,required:!0}),e.jsx(i,{label:"Apellidos",icon:"mdi mdi-account",placeholder:"Ingresa tus apellidos",value:j,onChange:s=>u(s.target.value),disabled:r||x!==null,required:!0})]})]}),e.jsx("h4",{className:"font-bold mb-2",children:"Datos de contacto"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-4",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(E,{label:"Prefijo",icon:"mdi mdi-flag",value:N,values:o.map(s=>({value:s.realCode,label:e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-emoji w-6 inline-block",children:s.flag}),e.jsx("span",{className:"font-semibold",children:s.country}),e.jsx("span",{className:"text-gray-600 text-xs ms-1",children:s.beautyCode})]})})),onChange:s=>p(s.target.value),disabled:r,searchable:!0})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsx(i,{icon:"mdi mdi-phone",label:"Teléfono",placeholder:"000000000",type:"tel",value:v,onChange:s=>h(s.target.value),disabled:r,required:!0})})]}),e.jsx("h4",{className:"font-bold mb-2",children:"Datos de inicio de sesión"}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsx(i,{label:"E-mail",placeholder:"correo@ejemplo.com",value:l.email,disabled:!0}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(i,{label:"Contraseña",placeholder:"••••••••",type:"password",value:w,onChange:s=>I(s.target.value),disabled:r,required:!0}),e.jsx(i,{label:"Confirmar",placeholder:"••••••••",type:"password",value:y,onChange:s=>F(s.target.value),disabled:r,required:!0})]})]}),e.jsx("button",{type:"submit",className:"w-full block border-2 border-[#4621E1] bg-[#4621E1] hover:bg-opacity-90 transition-colors font-semibold text-white rounded-xl py-2 px-6",disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"mdi mdi-loading mdi-spin"})," Registrando"]}):"Registrarme"})]})]})})})]}),e.jsx("footer",{className:"bg-white shadow-lg",children:e.jsxs("div",{className:"max-w-7xl w-full mx-auto relative flex flex-col md:flex-row gap-2 items-center justify-between py-4 px-4 sm:px-6 lg:px-8 text-sm",children:[e.jsxs("span",{children:[new Date().getFullYear()," © Atalaya | Propiedad de ",e.jsx("a",{href:"//mundoweb.pe",target:"_blank",className:"text-[#fe4611]",children:"MundoWeb"})]}),e.jsx("span",{children:"Powered By MundoWeb"})]})})]})]})};$((l,a)=>{L(l).render(e.jsx(K,{...a}))});
