import{j as e}from"./Accordion-B0xeqd_u.js";import{c}from"./ReactAppend-Da6mr3zD.js";import{C as m}from"./CreateReactScript-wxngZ06p.js";import{A as l}from"./Adminto-D364ytFN.js";import{T as d,R as p}from"./Table-BKtRPVyk.js";import{B as u}from"./BusinessesRest-Dm1R5PKi.js";import{r as f}from"./index-B80Lgev0.js";import{D as x}from"./DxButton-CsjWvhyj.js";import{S as h}from"./SurveyStep-C1GxQ1hd.js";import"./index-STwnHZb6.js";import"./index.esm-X2U-7gJn.js";import"./___vite-browser-external_commonjs-proxy-C9-083JZ.js";import"./main-DtAlmsP1.js";import"./Logout-C-aUOij0.js";import"./tippy-react.esm-PO7soYrD.js";import"./TippyButton-DN-nzi_f.js";import"./WhatsAppModal-BYoU6ug0.js";import"./BusinessIWorkCard-CZ9h3uY_.js";const i=new u,C=()=>{const r=f.useRef(),a=async t=>{(await h.fire({title:"¿Estás seguro?",text:"¡Esta acción no se puede deshacer!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"¡Sí, eliminar!"})).isConfirmed&&(await i.delete(t),$(r.current).dxDataGrid("instance").refresh())};return e.jsx(d,{gridRef:r,title:"Lista de empresas",toolBar:t=>{t.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(r.current).dxDataGrid("instance").refresh()}})},rest:i,columns:[{dataField:"name",caption:"Empresa"},{dataField:"person.document_number",caption:"RUC"},{dataField:"owner.name",caption:"Dueño"},{dataField:"creator.name",caption:"Creado por",cellTemplate:(t,{data:o})=>{var s,n;p(t,e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"d-block",children:(s=o.creator)==null?void 0:s.name}),e.jsx("small",{className:"text-muted",children:(n=o.creator)==null?void 0:n.email})]}))}},{caption:"Acciones",cellTemplate:(t,{data:o})=>{t.append(x({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash-alt",onClick:()=>a(o.id)}))}}]})};m((r,a)=>{if(!a.can("businesses","root"))return location.href="/";c(r).render(e.jsx(l,{...a,title:"Empresas",children:e.jsx(C,{...a})}))});
